(function(t){function e(e){for(var i,o,n=e[0],l=e[1],c=e[2],u=0,m=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);d&&d(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,n=1;n<s.length;n++){var l=s[n];0!==a[l]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},a={app:0},r=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},1543:function(t,e,s){"use strict";s.r(e),s.d(e,"db",(function(){return o})),s.d(e,"auth",(function(){return n})),s.d(e,"storage",(function(){return l})),s.d(e,"currentUser",(function(){return c})),s.d(e,"fbApiKey",(function(){return d})),s.d(e,"fbDbURL",(function(){return u})),s.d(e,"usersCollection",(function(){return p})),s.d(e,"postsCollection",(function(){return f})),s.d(e,"historicCollection",(function(){return g})),s.d(e,"mediaCollection",(function(){return h})),s.d(e,"driversCollection",(function(){return v})),s.d(e,"calenderRounds",(function(){return b})),s.d(e,"imageUrlCollection",(function(){return C})),s.d(e,"driversImagesCollection",(function(){return I})),s.d(e,"tracksImagesCollection",(function(){return $})),s.d(e,"logosCollection",(function(){return k})),s.d(e,"partnersCollection",(function(){return _})),s.d(e,"videosCollection",(function(){return y})),s.d(e,"galleryCollection",(function(){return x})),s.d(e,"tracksCollection",(function(){return w}));var i=s("8aa5"),a=s.n(i),r=(s("e71f"),{apiKey:"AIzaSyC26HyoQiAcprScfEH458xRPmn5siBAEaQ",authDomain:"balfemotorsport-9a12d.firebaseapp.com",databaseURL:"https://balfemotorsport-9a12d.firebaseio.com",projectId:"balfemotorsport-9a12d",storageBucket:"balfemotorsport-9a12d.appspot.com",messagingSenderId:"1023590199355",appId:"1:1023590199355:web:c8240c4baf23a747c52c1e",measurementId:"G-S20JBL87DK"});a.a.initializeApp(r),a.a.analytics();var o=a.a.firestore(),n=a.a.auth(),l=a.a.storage(),c=n.currentUser,d=r.apiKey,u=r.databaseURL,m={timestampsInSnapshots:!0};o.settings(m);var g=o.collection("historic"),f=o.collection("posts"),h=o.collection("media"),p=o.collection("users"),v=o.collection("drivers"),b=o.collection("calender"),C=o.collection("images"),_=o.collection("partners"),k=o.collection("logos"),y=o.collection("videos"),x=o.collection("gallery"),w=o.collection("tracks"),I=o.collection("driver_images"),$=o.collection("track_images")},"20bc":function(t,e,s){"use strict";var i=s("e1ea"),a=s.n(i);a.a},2994:function(t,e,s){},"336e":function(t,e,s){},4678:function(t,e,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=r(t);return s(e)}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=r,t.exports=a,a.id="4678"},"4aec":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("0cdd");var i=s("2b0e"),a=s("5f5b");s("21b6");i["default"].use(a["a"]);var r,o,n,l,c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("comp-header"),s("router-view"),s("comp-footer")],1)},d=[],u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-navbar",{attrs:{toggleable:"true",type:"dark",variant:"dark"}},[i("b-navbar-brand",{attrs:{to:"/"}},[i("img",{staticClass:"img-fluid logo",attrs:{src:s("c342")}})]),i("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),i("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[i("b-navbar-nav",{staticClass:"mx-auto align-items-center"},[i("b-nav-item",{attrs:{href:"#"}},[t._v("News")]),i("b-nav-item",{attrs:{href:"#media-sec"}},[t._v("Media")]),i("b-nav-item",{attrs:{href:"#drivers-sec"}},[t._v("Drivers")]),i("b-nav-item",{attrs:{href:"#calender"}},[t._v("Calender")]),i("b-nav-item",{attrs:{href:"#partners-sec"}},[t._v("Partners")]),i("b-nav-item",{attrs:{href:"#"}},[t._v("History")]),t.currentUser?t._e():i("b-nav-item",{attrs:{to:"/login"}},[t._v("Login")]),t.currentUser?i("b-nav-item",{on:{click:t.logout}},[t._v("Logout")]):t._e(),t.currentUser?i("b-nav-item",{attrs:{to:"/dashboard"}},[t._v("Dashboard")]):t._e()],1)],1)],1)},m=[],g=s("1543"),f={computed:{currentUser:function(){return this.$store.getters["admin/currentUser"]}},methods:{logout:function(){var t=this;g.auth.signOut().then((function(){t.$store.dispatch("admin/clearData"),t.$router.push("/")}))}}},h=f,p=s("2877"),v=Object(p["a"])(h,u,m,!1,null,null,null),b=v.exports,C=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pt-5 border-top border-primary"},[s("div",{staticClass:"footer-copyright text-center py-3"},[t._v(" Â© 2020 Copyright: "),s("a",{staticClass:"text-grey",attrs:{href:"https://www.torquetogether.com"}},[t._v("Torque Motorsport")])]),s("div",{staticClass:"text-center"},[s("a",{staticClass:"btn btn-primary",attrs:{href:"#"}},[t._v("Back To Top")])])])}],k={},y=Object(p["a"])(k,C,_,!1,null,null,null),x=y.exports,w={components:{compHeader:b,compFooter:x}},I=w,$=Object(p["a"])(I,c,d,!1,null,null,null),D=$.exports,U=(s("45fc"),s("8c4f")),P=s("8aa5"),T=s.n(P),j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-dark text-white",attrs:{id:"home"}},[s("comp-carousel",{staticClass:"border-bottom border-primary"}),s("comp-latest-news",{staticClass:"py-5 border-top border-bottom border-primary bg-white text-dark",attrs:{id:"news-sec"}}),s("comp-media",{staticClass:"py-5 border-top border-bottom border-primary",attrs:{id:"media-sec"}}),s("comp-drivers",{staticClass:"py-5 border-top border-bottom border-primary text-dark bg-white",attrs:{id:"drivers-sec"}}),s("comp-upcoming-events",{staticClass:"py-5 border-top border-bottom border-primary",attrs:{id:"calender"}}),s("comp-partners",{staticClass:"py-5 border-top border-bottom border-primary text-dark bg-white",attrs:{id:"partners-sec"}})],1)},O=[],N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-carousel",{attrs:{id:"carousel-head",interval:3e3,background:"black",width:"2560",height:"1250",fade:"","no-hover-pause":""},on:{"sliding-start":t.onSlideStart,"sliding-end":t.onSlideEnd},model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}},[s("b-carousel-slide",{scopedSlots:t._u([{key:"img",fn:function(){return[s("img",{staticClass:"d-block img-fluid w-100",attrs:{width:"2560",height:"1250",alt:"",src:t.latestNews.image}}),s("div",{staticClass:"mask"}),s("div",{staticClass:"container-fluid mb-5 text-container text-center text-white"},[s("div",{staticClass:"row"},[s("div",{staticClass:"partner-logo col-12 col-md-12 col-lg-6"},[s("h1",{staticClass:"h1"},[t._v(t._s(t.latestNews.title))]),s("p",{staticClass:"excerpt"},[t._v(t._s(t.latestNews.excerpt))]),s("p",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(t.latestNews.date)))])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 p-0"},[s("app-button",{attrs:{type:"link",linkTo:"/post/"+t.latestNews.id,addClass:["btn-md"]}},[t._v("View")])],1),s("div",{staticClass:"col-6 p-0"},[s("app-button",{attrs:{type:"link",linkTo:"news",addClass:["btn-md"]}},[t._v("View All")])],1)])])])])]},proxy:!0}])}),s("b-carousel-slide",{scopedSlots:t._u([{key:"img",fn:function(){return[s("img",{staticClass:"d-block img-fluid w-100",attrs:{width:"2560",height:"1250",src:t.history.image,alt:""}}),s("div",{staticClass:"mask"}),s("div",{staticClass:"container-fluid mb-5 text-container text-center text-white"},[s("div",{staticClass:"row"},[s("div",{staticClass:"partner-logo col-12 col-md-12 col-lg-6"},[s("h1",{staticClass:"h1"},[t._v(t._s(t.history.title))]),s("p",{staticClass:"excerpt"},[t._v(t._s(t.history.excerpt))]),s("p",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(t.history.date)))])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 p-0"},[s("app-button",{attrs:{type:"link",linkTo:"/history/"+t.history.id,addClass:["btn-md"]}},[t._v("View")])],1),s("div",{staticClass:"col-6 p-0"},[s("app-button",{attrs:{type:"link",linkTo:"news",addClass:["btn-md"]}},[t._v("View All")])],1)])])])])]},proxy:!0}])})],1)},q=[],S=(s("4160"),s("159b"),s("c1df")),E=s.n(S),L=s("1543"),R={data:function(){return{slide:0,sliding:!1,latestNews:[],history:[]}},methods:{onSlideStart:function(){this.sliding=!0},onSlideEnd:function(){this.sliding=!1},setPosts:function(){var t=this;L.historicCollection.orderBy("date","desc").get().then((function(e){var s=[];e.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)}));var i=Math.floor(Math.random()*s.length);t.history=s[i]})),L.postsCollection.orderBy("date","desc").limit(1).onSnapshot((function(e){var s=[];e.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),t.latestNews=s[0]}))}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()},formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")}},created:function(){this.setPosts()}},M=R,A=Object(p["a"])(M,N,q,!1,null,null,null),F=A.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticClass:"pl-3 pb-5 font-weight-bold"},[t._v("Latest News")]),s("div",{staticClass:"container-lg"},[s("div",{staticClass:"row"},t._l(t.latestPosts,(function(e,i){return s("div",{key:i,staticClass:"col-md-4"},[s("img",{staticClass:"img-fluid",attrs:{src:e.image}}),s("div",{staticClass:"text-container"},[s("h4",{staticClass:"h5 py-2 text-center"},[t._v(t._s(e.title))]),s("p",{staticClass:"excerpt"},[t._v(t._s(t._f("trimLength")(e.excerpt)))]),s("p",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(e.date)))]),s("div",{staticClass:"container-fluid p-0 mb-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("app-button",{attrs:{type:"link",linkTo:"/post/"+e.id,addClass:["btn-md"]}},[t._v("View")])],1)])])])])})),0)])])},z=[],G=s("1543"),Y={data:function(){return{latestPosts:[]}},filters:{formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")},trimLength:function(t){return t.length<200?t:"".concat(t.substring(0,200),"...")}},created:function(){var t=this;G.postsCollection.orderBy("date","desc").limit(3).onSnapshot((function(e){var s=[];e.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),t.latestPosts=s}))}},V=Y,B=Object(p["a"])(V,H,z,!1,null,null,null),Q=B.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticClass:"pl-3 pb-5 font-weight-bold"},[t._v("Media")]),s("div",{staticClass:"container-fluid border-top border-bottom border-primary"},[s("div",{staticClass:"row"},t._l(t.paginatedData,(function(e,i){return s("div",{key:i,staticClass:"col-12 col-sm-6 col-md-4 col-lg-3 p-0"},[e.imageId?s("div",[s("img",{staticClass:"img-fluid",attrs:{src:e.url}})]):t._e(),e.videoId?s("div",[s("b-embed",{attrs:{type:"iframe",aspect:"16by9",src:e.url,allowfullscreen:""}})],1):t._e()])})),0)]),s("nav",{attrs:{"aria-label":"Media results"}},[s("ul",{staticClass:"pagination justify-content-center pt-5"},[s("li",{staticClass:"page-item"},[s("b-button",{staticClass:"page-link",attrs:{disabled:0==t.pageNumber},on:{click:t.prevPage}},[t._v("Previous")])],1),s("li",{staticClass:"page-item"},[s("b-button",{staticClass:"page-link",attrs:{disabled:t.pageNumber>=t.pageCount-1},on:{click:t.nextPage}},[t._v("Next")])],1)])])])},K=[],J=(s("fb6a"),s("a9e3"),{data:function(){return{pageNumber:0}},props:{size:{type:Number,required:!1,default:12}},computed:{galleryContent:function(){return this.$store.getters["gallery/getGallery"]},pageCount:function(){var t=this.galleryContent.length,e=this.size;return Math.ceil(t/e)},paginatedData:function(){var t=this.pageNumber*this.size,e=t+this.size;return this.galleryContent.slice(t,e)}},methods:{nextPage:function(){this.pageNumber++},prevPage:function(){this.pageNumber--}},created:function(){this.$store.dispatch("gallery/setGallery")}}),X=J,Z=Object(p["a"])(X,W,K,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"py-5 border-top border-bottom border-primary text-dark bg-white",attrs:{id:"drivers-sec"}},[s("h2",{staticClass:"pl-3 pb-5 font-weight-bold"},[t._v("Drivers")]),s("div",{staticClass:"container-fluid p-0"},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col-lg-12"},[t.drivers.length>0?s("div",{staticClass:"row no-gutters"},t._l(t.drivers,(function(e,i){return s("div",{key:i,staticClass:"driver-cont-container col-4 col-lg-2 view",on:{click:function(s){return t.clickedDriver(e)}}},[s("img",{staticClass:"img-fluid",attrs:{src:e.image}}),s("div",{staticClass:"text-container text-center mask overflow-hidden"},[s("div",{staticClass:"d-flex h-100"},[s("h3",{staticClass:"title text-primary mt-auto"},[t._v(t._s(e.firstName))])])])])})),0):t._e()]),null!=t.currentDriver?s("div",{staticClass:"col-md-12",attrs:{id:"driver-sec"}},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col-md-6 view"},[s("img",{staticClass:"img-fluid",attrs:{src:t.currentDriver.image}})]),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"text-center"},[s("h3",{staticClass:"name-title"},[t._v(t._s(t.currentDriver.fullName))])]),s("div",{staticClass:"container-fluid"},[s("h4",{staticClass:"px-5 pb-2"},[t._v("Career Highlight")]),s("div",{staticClass:"px-5",domProps:{innerHTML:t._s(t.currentDriver.career)}})])])])]):t._e()])])])},st=[],it={data:function(){return{currentDriver:null}},computed:{drivers:function(){return this.$store.getters["drivers/getDrivers"]}},methods:{clickedDriver:function(t){this.currentDriver=t},defaultDriver:function(){this.currentDriver=this.drivers[0]}},created:function(){var t=this;this.$store.dispatch("drivers/setDrivers"),setTimeout((function(){t.defaultDriver()}),1e3)}},at=it,rt=Object(p["a"])(at,et,st,!1,null,null,null),ot=rt.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticClass:"pl-3 pb-5 font-weight-bold"},[t._v("Upcoming Events")]),s("div",{staticClass:"py-5",attrs:{id:"calender-sec"}},[s("div",{staticClass:"container-fluid"},[null!=t.calenderRounds?s("div",{staticClass:"row"},t._l(t.calenderRounds,(function(e,i){return s("div",{key:i,staticClass:"col-6 col-sm-4 col-md-3 col-lg-2 pb-5"},[s("img",{staticClass:"img-fluid",attrs:{src:e.image}}),0==e.ongoing?s("div",{staticClass:"mask"}):t._e(),s("hr",{staticClass:"balfe-line"}),s("h4",[t._v(t._s(e.trackName))]),s("p",[t._v("Date: "+t._s(t._f("formatDate")(e.date)))]),s("a",{staticClass:"text-primary position-absolute",on:{click:function(s){return t.info(e.trackId,e)}}},[t._v("More info")])])})),0):t._e()]),s("div",{staticClass:"row"},[s("div",{staticClass:"container pt-4"},[s("div",{staticClass:"col-12",attrs:{id:"circuit-info"}},[t.track!={}?s("div",{staticClass:"row"},[s("div",{staticClass:"col-4"},[s("h3",{staticClass:"circuit-name font-weight-bold text-center"},[t._v(t._s(t.track.name))]),s("hr",{staticClass:"balfe-line"}),s("p",[t._v(" Date: "),s("span",{staticClass:"race-date"},[t._v(t._s(t._f("formatDate")(t.track.date)))])]),s("p",[t._v(" Coners: "),s("span",{staticClass:"corners"},[t._v(t._s(t.track.corners))])]),s("p",[t._v(" Circuit length: "),s("span",{staticClass:"circuit-length"},[t._v(t._s(t.track.length)+" miles")])])]),s("div",{staticClass:"col-4"},[s("h3",{staticClass:"font-weight-bold text-center"},[t._v("Last Year Result")]),s("hr",{staticClass:"balfe-line"}),s("p",[t._v(" GT3 race one result: "),s("span",{staticClass:"gt3-race-result"},[t._v(t._s(t.track.gt3_one))])]),s("p",[t._v(" GT4 race one result (Pro-Am): "),s("span",{staticClass:"gt4-race-result"},[t._v(t._s(t.track.gt4_one))])]),s("p",[t._v(" GT3 race two result: "),s("span",{staticClass:"gt3-race-2-result"},[t._v(t._s(t.track.gt3_two))])]),s("p",[t._v(" GT4 race two result (Pro-Am): "),s("span",{staticClass:"gt4-race-2-result"},[t._v(t._s(t.track.gt4_two))])])]),s("div",{staticClass:"col-4",attrs:{id:"fixtures"}},[s("h3",{staticClass:"font-weight-bold text-center"},[t._v("Current Result")]),s("hr",{staticClass:"balfe-line"}),s("p",[t._v(" Free practice one: "),s("span",{staticClass:"fp1"},[t._v(t._s(t.track.fp_one))])]),s("p",[t._v(" Free practice two: "),s("span",{staticClass:"fp2"},[t._v(t._s(t.track.fp_two))])]),s("p",[t._v(" Qualifying: "),s("span",{staticClass:"qualifying"},[t._v(t._s(t.track.qualifying))])]),s("p",[t._v(" Race one: "),s("span",{staticClass:"race-1"},[t._v(t._s(t.track.race_one))])]),s("p",[t._v(" Race two: "),s("span",{staticClass:"race-2"},[t._v(t._s(t.track.race_two))])])])]):t._e()])])])])])},lt=[],ct=s("1543"),dt={data:function(){return{trackInfo:!1,track:{},currentTrack:{}}},computed:{calenderRounds:function(){return this.$store.getters["calender/getAllRounds"]}},methods:{activeTrack:function(){var t=this,e=[];this.trackInfo=!0;for(var s=0;s<this.calenderRounds.length;s++)1==this.calenderRounds[s].ongoing&&e.push(this.calenderRounds[s]);ct.tracksCollection.doc(e[0].trackId).get().then((function(s){var i=s.data();t.track=i,t.track.date=e[0].date}))},info:function(t,e){var s=this;this.trackInfo=!0,ct.tracksCollection.doc(t).get().then((function(t){var i=t.data();i.date=e.date,s.track=i}))}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()},formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")}},created:function(){var t=this;this.$store.dispatch("calender/setAllRounds"),setTimeout((function(){t.activeTrack()}),1e3)}},ut=dt,mt=Object(p["a"])(ut,nt,lt,!1,null,null,null),gt=mt.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"py-5 border-top border-bottom border-primary text-dark bg-white",attrs:{id:"partners-sec"}},[s("h2",{staticClass:"pl-3 pb-5 font-weight-bold"},[t._v("Partners")]),s("div",{staticClass:"container-fluid pb-5"},[s("div",{staticClass:"row"},t._l(t.partners,(function(e,i){return s("div",{key:i,staticClass:"partner-logo col-4 col-lg-2"},[s("img",{staticClass:"img-fluid",attrs:{src:e.logoUrl},on:{click:function(s){return t.clickedPartner(e)}}})])})),0)]),t.activePartner?s("div",{staticClass:"container",attrs:{id:"partner-display"}},[s("h3",{staticClass:"text-center pb-5"},[t._v(t._s(t.activePartner.name))]),s("div",{staticClass:"col-12 p-0"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-6",attrs:{id:"partner-logo-cont"}},[s("img",{staticClass:"img-fluid",attrs:{src:t.activePartner.logoUrl}})]),s("div",{staticClass:"col-12 col-sm-6",domProps:{innerHTML:t._s(t.activePartner.desc)}})])])]):t._e()])},ht=[],pt=s("1543"),vt={data:function(){return{activePartner:!1,partnerId:null,partnerView:{}}},computed:{partners:function(){return this.$store.getters["partners/getPartners"]}},methods:{clickedPartner:function(t){this.activePartner=t},randomPartner:function(){var t=this;pt.partnersCollection.orderBy("name").get().then((function(e){var s=[];e.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)}));var i=Math.floor(Math.random()*s.length);t.activePartner=s[i]}))}},created:function(){this.$store.dispatch("partners/setPartners"),this.randomPartner()},mounted:function(){}},bt=vt,Ct=Object(p["a"])(bt,ft,ht,!1,null,null,null),_t=Ct.exports,kt={components:{compCarousel:F,compLatestNews:Q,compMedia:tt,compPartners:_t,compUpcomingEvents:gt,compDrivers:ot}},yt=kt,xt=Object(p["a"])(yt,j,O,!1,null,null,null),wt=xt.exports,It=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("transition",{attrs:{name:"fade"}},[t.performingRequest?s("div",{staticClass:"loading"},[s("p",[t._v("Loading...")])]):t._e()]),t.showLoginForm?s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("h1",{staticClass:"text-left"},[t._v("Login")]),s("b-form-group",{attrs:{id:"email",label:"Email address: ","label-for":"email",description:"We'll never share your email with anyone else."}},[s("b-input",{class:{invalid:t.$v.formdata.email.$error},attrs:{id:"email",type:"email",required:"",placeholder:"you@email.com"},on:{blur:function(e){return t.$v.formdata.email.$touch()}},model:{value:t.formdata.email,callback:function(e){t.$set(t.formdata,"email","string"===typeof e?e.trim():e)},expression:"formdata.email"}}),t.$v.formdata.email.$error?s("div",{},[t.$v.formdata.email.required?t._e():s("p",{staticClass:"error-lablel"},[t._v("This field is required")]),t.$v.formdata.email.email?t._e():s("p",{staticClass:"error-lablel"},[t._v("Please enter a valid email")])]):t._e()],1),s("b-form-group",{attrs:{id:"password",label:"Password: ","label-for":"password"}},[s("b-input",{class:{invalid:t.$v.formdata.password.$error},attrs:{type:"password",id:"password",required:"",placeholder:"Enter Password","aria-describedby":"password-help-block"},on:{blur:function(e){return t.$v.formdata.password.$touch()}},model:{value:t.formdata.password,callback:function(e){t.$set(t.formdata,"password","string"===typeof e?e.trim():e)},expression:"formdata.password"}}),t.$v.formdata.password.$error?s("div",[t.$v.formdata.password.required?t._e():s("p",{staticClass:"error-lablel"},[t._v("This field is required")]),t.$v.formdata.password.minLength?t._e():s("p",{staticClass:"error-lablel"},[t._v("At Least 4 characters")])]):t._e()],1),s("b-button",{attrs:{variant:"primary"},on:{click:t.login}},[t._v("Login")]),s("div",{staticClass:"d-block py-2"},[s("a",{staticClass:"text-secondary pr-2",on:{click:t.toggleForm}},[t._v("Create an Account")]),s("a",{staticClass:"text-primary",on:{click:t.togglePasswordReset}},[t._v("Forgot Password")])])],1):t._e(),t.showLoginForm||t.showForgotPassword?t._e():s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("h1",[t._v("Get Started")]),s("div",{staticClass:"row"},[s("b-form-group",{staticClass:"col-12 col-md-6",attrs:{id:"name",label:"Name: ","label-for":"name"}},[s("b-input",{attrs:{type:"text",id:"name",required:"",placeholder:"Enter name"},model:{value:t.signupForm.name,callback:function(e){t.$set(t.signupForm,"name","string"===typeof e?e.trim():e)},expression:"signupForm.name"}})],1),s("b-form-group",{staticClass:"col-12 col-md-6",attrs:{id:"title",label:"Title: ","label-for":"title"}},[s("b-input",{attrs:{type:"text",id:"title",required:"",placeholder:"Enter title"},model:{value:t.signupForm.title,callback:function(e){t.$set(t.signupForm,"title","string"===typeof e?e.trim():e)},expression:"signupForm.title"}})],1)],1),s("b-form-group",{attrs:{id:"email2",label:"Email: ","label-for":"email2"}},[s("b-input",{attrs:{type:"text",id:"email2",required:"",placeholder:"you@email.com"},model:{value:t.signupForm.email,callback:function(e){t.$set(t.signupForm,"email","string"===typeof e?e.trim():e)},expression:"signupForm.email"}})],1),s("b-form-group",{attrs:{id:"password2",label:"Password: ","label-for":"password2"}},[s("b-input",{attrs:{type:"text",id:"password2",required:"",placeholder:"Min 6 characters"},model:{value:t.signupForm.password,callback:function(e){t.$set(t.signupForm,"password","string"===typeof e?e.trim():e)},expression:"signupForm.password"}})],1),s("b-button",{attrs:{variant:"secondary"},on:{click:t.signup}},[t._v("Sign Up")]),s("div",{staticClass:"py-2"},[s("a",{staticClass:"text-secondary",on:{click:t.toggleForm}},[t._v("Back to Log In")])])],1),t.showForgotPassword?s("b-form",{staticClass:"password-reset",on:{submit:function(t){t.preventDefault()}}},[t.passwordResetSuccess?s("div",[s("h1",[t._v("Email Sent")]),s("p",[t._v("check your email for a link to reset your password")]),s("div",{staticClass:"py-2"},[s("a",{staticClass:"text-secondary",on:{click:t.toggleForm}},[t._v("Back to Log In")])])]):s("div",[s("h1",[t._v("Reset Password")]),s("p",[t._v("We will send you an email to reset your password")]),s("b-form-group",{attrs:{id:"email3",label:"Email: ","label-for":"email3"}},[s("b-input",{attrs:{type:"text",id:"email3",required:"",placeholder:"you@email.com"},model:{value:t.signupForm.email,callback:function(e){t.$set(t.signupForm,"email","string"===typeof e?e.trim():e)},expression:"signupForm.email"}})],1),s("b-button",{attrs:{variant:"secondary"},on:{click:t.resetPassword}},[t._v("Submit")]),s("div",{staticClass:"py-2"},[s("a",{staticClass:"text-secondary",on:{click:t.toggleForm}},[t._v("Back to Log In")])])],1)]):t._e(),s("transition",{attrs:{name:"fade"}},[""!==t.errorMsg?s("div",{staticClass:"error-msg"},[s("p",[t._v(t._s(t.errorMsg))])]):t._e()])],1)},$t=[],Dt=(s("b0c0"),s("b5ae")),Ut=s("1543"),Pt={data:function(){return{formdata:{email:"",password:""},signupForm:{name:"",title:"",email:"",password:""},passwordForm:{email:""},showLoginForm:!0,showForgotPassword:!1,passwordResetSuccess:!1,performingRequest:!1,errorMsg:""}},validations:{formdata:{email:{required:Dt["required"],email:Dt["email"]},password:{required:Dt["required"],minLength:Object(Dt["minLength"])(6)}}},methods:{toggleForm:function(){this.errorMsg="",this.showLoginForm=!this.showLoginForm,this.showForgotPassword&&(this.showForgotPassword=!1,this.passwordResetSuccess=!1)},togglePasswordReset:function(){this.showForgotPassword?(this.showLoginForm=!0,this.showForgotPassword=!1,this.passwordResetSuccess=!1):(this.showLoginForm=!1,this.showForgotPassword=!0)},login:function(){var t=this;this.performingRequest=!0,Ut.auth.signInWithEmailAndPassword(this.formdata.email,this.formdata.password).then((function(e){t.$store.commit("admin/setCurrentUser",e.user),t.$store.dispatch("admin/fetchUser"),t.performingRequest=!1,t.$router.push("/dashboard")})).catch((function(e){t.performingRequest=!1,t.errorMsg=e.message}))},signup:function(){var t=this;this.performingRequest=!0,Ut.auth.createUserWithEmailAndPassword(this.signupForm.email,this.signupForm.password).then((function(e){t.$store.commit("admin/setCurrentUser",e.user),Ut.usersCollection.doc(e.user.uid).set({name:t.signupForm.name,title:t.signupForm.title}).then((function(){t.$store.dispatch("admin/fetchUser"),t.performingRequest=!1,t.$router.push("/dashboard")})).catch((function(e){t.performingRequest=!1,t.errorMsg=e.message}))})).catch((function(e){t.performingRequest=!1,t.errorMsg=e.message}))},resetPassword:function(){var t=this;this.performingRequest=!0,Ut.auth.sendPasswordResetEmail(this.passwordForm.email).then((function(){t.performingRequest=!1,t.passwordResetSuccess=!0,t.passwordForm.email=""})).catch((function(e){t.performingRequest=!1,t.errorMsg=e.message}))}}},Tt=Pt,jt=(s("6141"),Object(p["a"])(Tt,It,$t,!1,null,"f4b0bfe4",null)),Ot=jt.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container text-center"},[t._v("Sorry the page could not be found")])},qt=[],St={},Et=Object(p["a"])(St,Nt,qt,!1,null,null,null),Lt=Et.exports,Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container-fluid"},[t.post?s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 text-center"},[s("img",{staticClass:"img-fluid",attrs:{src:t.post.image}})])]):t._e(),s("h1",{staticClass:"text-center"},[t._v(t._s(t.post.title))]),s("hr",{staticClass:"balfe-line"})]),s("div",{staticClass:"container"},[s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-12 p-0",domProps:{innerHTML:t._s(t.post.main)}})]),s("div",{staticClass:"row"},t._l(t.post.gallery,(function(t,e){return s("div",{key:e,staticClass:"col-sm-6 col-md-4 col-lg-3 p-0"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}})])})),0),s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-12 p-0",domProps:{innerHTML:t._s(t.post.comments)}})])])])},Mt=[],At={computed:{post:function(){return this.$store.getters["posts/getPost"]}},created:function(){var t=this.$route.params.id;this.$store.dispatch("posts/setPost",t)},destroyed:function(){this.$store.commit("posts/clearPost")}},Ft=At,Ht=Object(p["a"])(Ft,Rt,Mt,!1,null,null,null),zt=Ht.exports,Gt={},Yt=Object(p["a"])(Gt,r,o,!1,null,null,null),Vt=Yt.exports,Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container-fluid"},[t.post?s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 text-center"},[s("img",{staticClass:"img-fluid",attrs:{src:t.post.image}})])]):t._e(),s("h1",{staticClass:"text-center"},[t._v(t._s(t.post.title))]),s("hr",{staticClass:"balfe-line"})]),s("div",{staticClass:"container"},[s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-12 p-0",domProps:{innerHTML:t._s(t.post.main)}})]),s("div",{staticClass:"row"},t._l(t.post.gallery,(function(t,e){return s("div",{key:e,staticClass:"col-sm-6 col-md-4 col-lg-3 p-0"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}})])})),0),s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-12 p-0",domProps:{innerHTML:t._s(t.post.comments)}})])])])},Qt=[],Wt={computed:{post:function(){return this.$store.getters["history/getHistory"]}},created:function(){var t=this.$route.params.id;this.$store.dispatch("history/setHistory",t)},destroyed:function(){this.$store.commit("history/clearHistory")}},Kt=Wt,Jt=Object(p["a"])(Kt,Bt,Qt,!1,null,null,null),Xt=Jt.exports,Zt={},te=Object(p["a"])(Zt,n,l,!1,null,null,null),ee=te.exports,se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid"},[s("b-nav",{attrs:{tabs:""}},[s("b-nav-item",{attrs:{to:"/dashboard/posts"}},[t._v("Posts")]),s("b-nav-item",{attrs:{to:"/dashboard/partners"}},[t._v("Partners")]),s("b-nav-item",{attrs:{to:"/dashboard/drivers"}},[t._v("Drivers")]),s("b-nav-item",{attrs:{to:"/dashboard/calender"}},[t._v("Calender")]),s("b-nav-item",{attrs:{to:"/dashboard/history"}},[t._v("History")]),s("b-nav-item",{attrs:{to:"/dashboard/media"}},[t._v("Media")]),s("b-nav-item",{attrs:{to:"/dashboard/settings"}},[t._v("Settings")])],1),s("router-view")],1)},ie=[],ae={},re=Object(p["a"])(ae,se,ie,!1,null,null,null),oe=re.exports,ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Welcome "+t._s(t.userProfile.name)+" to the Balfe Motorsport dashboard")]),s("hr",{staticClass:"balfe-line"})])},le=[],ce={computed:{userProfile:function(){return this.$store.getters["admin/getUserProfile"]}}},de=ce,ue=Object(p["a"])(de,ne,le,!1,null,null,null),me=ue.exports,ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Posts")]),s("hr",{staticClass:"balfe-line"}),s("b-nav",{attrs:{tabs:""}},[s("b-nav-item",{attrs:{to:"/dashboard/posts/add_posts"}},[t._v("Add post")]),s("b-nav-item",{attrs:{to:"/dashboard/posts/list_posts"}},[t._v("Manage posts")])],1),s("router-view")],1)},fe=[],he={},pe=Object(p["a"])(he,ge,fe,!1,null,null,null),ve=pe.exports,be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-left"},[s("h1",{staticClass:"text-left"},[t._v("Add posts")]),s("hr",{staticClass:"balfe-line"}),s("b-form",{on:{submit:function(e){return e.preventDefault(),t.submitHandler(e)}}},[s("h4",[t._v("Headline image")]),s("b-button",{staticClass:"btn btn-primary",attrs:{value:"post"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.post.image}})]),s("b-form-group",{staticClass:"text-left",attrs:{id:"title",label:"Title","label-for":"title"}},[s("b-input",{attrs:{id:"title",type:"text",required:"",placeholder:"Maximun 100 characters"},on:{blur:function(e){return t.$v.post.title.$touch()}},model:{value:t.post.title,callback:function(e){t.$set(t.post,"title","string"===typeof e?e.trim():e)},expression:"post.title"}}),t.$v.post.title.$error?s("p",{staticClass:"error-label"},[t._v("This input is required")]):t._e(),t.$v.post.title.maxLength?t._e():s("p",{staticClass:"error-label"},[t._v("Maximum of "+t._s(t.$v.post.title.$params.maxLength.max)+" characters")])],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"date",label:"Date","label-for":"date"}},[s("datepicker",{attrs:{id:"date",required:""},on:{blur:function(e){return t.$v.post.date.$touch()}},model:{value:t.post.date,callback:function(e){t.$set(t.post,"date",e)},expression:"post.date"}}),t.$v.post.date.$error?s("p",{staticClass:"error-label"},[t._v("Date required")]):t._e()],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"excerpt",label:"Excerpt","label-for":"excerpt"}},[s("b-input",{attrs:{id:"excerpt",type:"text",required:"",placeholder:"Maximun 500 characters"},on:{blur:function(e){return t.$v.post.excerpt.$touch()}},model:{value:t.post.excerpt,callback:function(e){t.$set(t.post,"excerpt","string"===typeof e?e.trim():e)},expression:"post.excerpt"}}),t.$v.post.excerpt.$error?s("p",{staticClass:"error-label"},[t._v("This input is required")]):t._e(),t.$v.post.excerpt.maxLength?t._e():s("p",{staticClass:"error-label"},[t._v("Maximum of "+t._s(t.$v.post.excerpt.$params.maxLength.max)+" characters")])],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"content",label:"Content","label-for":"content"}},[s("wysiwyg",{attrs:{id:"content"},model:{value:t.post.main,callback:function(e){t.$set(t.post,"main",e)},expression:"post.main"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"comments",label:"Comments","label-for":"comments"}},[s("wysiwyg",{attrs:{id:"comments"},model:{value:t.post.comments,callback:function(e){t.$set(t.post,"comments",e)},expression:"post.comments"}})],1),s("h4",[t._v("Gallery images")]),s("div",{staticClass:"form-group"},[s("b-button",{staticClass:"btn btn-primary",attrs:{value:"gallery"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-button",{staticClass:"btn btn-primary ml-2",on:{click:t.chooseImage}},[t._v("+ Select Images")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e(),s("div",{staticClass:"row"},t._l(t.galleryImages,(function(t,e){return s("div",{key:e,staticClass:"col-sm-6 col-md-4 col-lg-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}})])})),0),s("b-button",{attrs:{type:"submit",disabled:""==t.post.title,variant:"primary"}},[t._v("Add post")])],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.newImage,callback:function(e){t.newImage=e},expression:"newImage"}},[s("h5",[t._v("Upload a new image")]),s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[t.imageUrl?s("div",[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]):t._e()]),"post"==t.input?s("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),"gallery"==t.input?s("input",{ref:"galleryInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.close}},[t._v("Close")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e()],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.userPrompt,callback:function(e){t.userPrompt=e},expression:"userPrompt"}},[s("h5",[t._v("Duplicate image")]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]),s("p",[t._v("Duplicate image would you like to use this image ?")]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.confirm}},[t._v("Yes")]),s("b-button",{staticClass:"mr-2",on:{click:t.decline}},[t._v("No")])],1)]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.imageChoice,callback:function(e){t.imageChoice=e},expression:"imageChoice"}},[s("b-form-group",{attrs:{label:"Images"}},[s("b-form-checkbox-group",{attrs:{id:"checkbox",name:"Images"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.images,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}}),s("b-form-checkbox",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1),s("b-modal",{attrs:{"hide-footer":"","hide-header":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("div",{staticClass:"d-block text-center"},[s("p",[t._v("Your post has no content are you sure you want to post this ?")])]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.dialogOnCancel}},[t._v("Close")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.dialogOnConfirm}},[t._v("Add post")])],1)]),t.postAdded?s("div",{attrs:{variant:"success"}},[t._v("Your post has been added!")]):t._e(),""!==t.errorMsg?s("div",{staticClass:"error-msg"},[s("p",[t._v(t._s(t.errorMsg))])]):t._e()],1)},Ce=[],_e=s("1543"),ke={data:function(){return{post:{image:"",title:"",main:"",comments:"",excerpt:"",date:"",gallery:""},galleryImages:[],fullPost:{},postAdded:null,selected:[],type:"",newImage:!1,uploadSucsess:!1,imageChoice:!1,userPrompt:!1,dialog:!1,errorMsg:"",performingRequest:!1,imageId:null,exist:!1,input:null}},validations:{post:{title:{required:Dt["required"],maxLength:Object(Dt["maxLength"])(100)},excerpt:{required:Dt["required"],maxLength:Object(Dt["maxLength"])(500)},date:{required:Dt["required"]}}},methods:{createPost:function(){var t=this;_e.postsCollection.add({createdOn:new Date,imageId:this.imageId,image:this.post.image,main:this.post.main,title:this.post.title,comments:this.post.comments,excerpt:this.post.excerpt,date:this.post.date,gallery:this.galleryImages}).then((function(){t.postAdded=!0,t.$v.$reset(),t.post.main="",t.post.comments="",t.post.image="",t.post.title="",t.post.excerpt="",t.post.date="",t.performingRequest=!1,t.exist=!1,t.galleryImages=[],t.imageId=null,t.$store.commit("images/setImageUrl",null),setInterval((function(){t.postAdded=null}),3e3)})).catch((function(e){t.performingRequest=!1,t.errorMsg=e.message}))},addNewImage:function(t){this.newImage=!0,"post"==t.target.value?this.input="post":"gallery"==t.target.value&&(this.input="gallery")},checkFile:function(t){var e=this,s=t.target.files[0],i=!1;_e.imageUrlCollection.where("name","==",s.name).get().then((function(t){t.forEach((function(t){if(t.exists)return i=!0,void(e.$refs.fileInput?(e.post.image=t.data().url,e.imageId=t.id,e.userPrompt=!0,e.$store.commit("images/setImageUrl",t.data().url),e.type="post"):e.$refs.galleryInput&&(e.$store.commit("images/setImageUrl",t.data().url),e.imageId=t.id,e.userPrompt=!0,e.type="gallery"))}))})).then((function(){i||e.$store.dispatch("images/uploadImage",s)}))},decline:function(){"post"==this.type?(this.userPrompt=!1,this.$store.commit("images/setImageUrl",null),this.imageId=null,this.$refs.fileInput.value="",this.post.image=null):"gallery"==this.type&&(this.userPrompt=!1,this.imageId=null,this.$refs.galleryInput.value="")},confirm:function(){var t=this;"gallery"==this.type?_e.imageUrlCollection.doc(this.imageId).get().then((function(e){var s=e.data(),i={name:s.name,url:s.url,id:e.id};t.galleryImages.push(i)})).then((function(){t.userPrompt=!1,t.imageId=null,t.$refs.galleryInput.value="",t.type="",t.$store.commit("images/setImageUrl",null),t.newImage=!1})):"post"==this.type&&(this.post.image=this.$store.getters["images/getImageUrl"],this.userPrompt=!1,this.$refs.fileInput.value="",this.type="",this.newImage=!1,this.$store.commit("images/setImageUrl",null))},close:function(){var t=this;if("post"==this.input){this.newImage=!1,this.$refs.fileInput.value="";var e=this.$store.getters["images/getImageUrl"];this.post.image=e,this.$store.commit("images/setImageUrl",null),this.type="",_e.imageUrlCollection.where("url","==",e).get().then((function(e){e.forEach((function(e){t.imageId=e.id}))}))}else if("gallery"==this.input){this.$store.dispatch("images/getImage",this.$store.getters["images/getImageUrl"]);var s=this.$store.getters["images/getImage"];if(s){var i={name:s.name,url:s.url,id:this.imageId};this.galleryImages.push(i)}this.newImage=!1,this.$refs.galleryInput.value="",this.$store.commit("images/setImageUrl",null),this.type=""}},chooseImage:function(){this.imageChoice=!0},confirmSelection:function(){for(var t=this,e=0;e<this.selected.length;e++){var s=this.selected[e];_e.imageUrlCollection.doc(s).get().then((function(e){var s=e.data(),i={name:s.name,url:s.url,id:e.id};t.galleryImages.push(i)})).then((function(){t.imageChoice=!1}))}},closeSel:function(){this.imageChoice=!1},submitHandler:function(){this.$v.$invalid?alert("Something is wrong"):""===this.post.main?this.dialog=!0:this.createPost()},dialogOnCancel:function(){this.dialog=!1},dialogOnConfirm:function(){this.dialog=!1,this.createPost()}},computed:{request:function(){return this.$store.getters["images/getRequest"]},imageUrl:function(){return this.$store.getters["images/getImageUrl"]},confirmation:function(){return this.$store.getters["images/confirmation"]},images:function(){return this.$store.getters["images/getImages"]}},created:function(){this.$store.dispatch("images/setImages")}},ye=ke,xe=(s("20bc"),Object(p["a"])(ye,be,Ce,!1,null,"5c06b8fd",null)),we=xe.exports,Ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Manage posts")]),s("hr",{staticClass:"balfe-line"}),t.posts.length>0?s("div",[s("table",{staticClass:"table table-striped table-hover text-left"},[t._m(0),s("tbody",t._l(t.posts,(function(e,i){return s("tr",{key:i},[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.title))]),s("td",[t._v(t._s(e.excerpt))]),s("td",[t._v(t._s(t._f("formatDate")(e.date)))]),s("td",[t._v(t._s(t._f("formatCreation")(e.createdOn)))]),s("td",[s("div",{staticClass:"d-inline px-1 text-dark",on:{click:function(s){return t.editPost(e)}}},[t._v("Edit")]),s("div",{staticClass:"d-inline px-1 text-primary",on:{click:function(s){return t.deletePost(e)}}},[t._v("Delete")])])])})),0)])]):s("div",[t._v("Sorry no posts yet .......... Add some!")]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.newImageUpload,callback:function(e){t.newImageUpload=e},expression:"newImageUpload"}},[s("h5",[t._v("Upload a new image")]),s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[t.imageUrl?s("div",[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]):t._e()]),"post"==t.input?s("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),"gallery"==t.input?s("input",{ref:"galleryInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.close}},[t._v("Close")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e()],1),s("b-modal",{attrs:{"hide-footer":"","hide-header":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[s("div",{staticClass:"d-block text-center"},[s("p",[t._v(" Are you sure you want to delete this post ? ( there's no turning back ) ")])]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.deleteOnConfirm}},[t._v("Yes, delete")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.deleteOnCancel}},[t._v("No, do not delete it")])],1)]),s("b-modal",{attrs:{"hide-footer":"","hide-header":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("div",{staticClass:"text-center"},[t.newImage?t._e():s("img",{staticClass:"img-fluid",attrs:{src:t.currentPost.image}}),t.newImage?s("img",{staticClass:"img-fluid",attrs:{src:t.post.image}}):t._e()]),s("b-button",{staticClass:"btn btn-primary mt-3",attrs:{value:"post"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-button",{staticClass:"btn btn-primary ml-2 mt-3",attrs:{value:"post"},on:{click:function(e){return t.chooseImage(e)}}},[t._v("+ Select Image")]),s("b-form-group",{staticClass:"text-left",attrs:{id:"date",label:"Date","label-for":"date"}},[s("datepicker",{attrs:{id:"date"},model:{value:t.post.date,callback:function(e){t.$set(t.post,"date",e)},expression:"post.date"}}),s("span",[t._v("Current date: "+t._s(t._f("formatDate")(t.currentPost.date)))])],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"title",label:"Title","label-for":"title"}},[s("b-input",{attrs:{id:"title",type:"text",placeholder:t.currentPost.title},model:{value:t.post.title,callback:function(e){t.$set(t.post,"title","string"===typeof e?e.trim():e)},expression:"post.title"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"excerpt",label:"Excerpt","label-for":"excerpt"}},[s("b-input",{attrs:{id:"excerpt",type:"text",placeholder:t.currentPost.excerpt},model:{value:t.post.excerpt,callback:function(e){t.$set(t.post,"excerpt","string"===typeof e?e.trim():e)},expression:"post.excerpt"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"main",label:"Main","label-for":"main"}},[s("wysiwyg",{attrs:{id:"main",value:t.currentPost.main},model:{value:t.post.main,callback:function(e){t.$set(t.post,"main",e)},expression:"post.main"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"comments",label:"Comments","label-for":"comments"}},[s("wysiwyg",{attrs:{id:"comments",value:t.currentPost.comments},model:{value:t.post.comments,callback:function(e){t.$set(t.post,"comments",e)},expression:"post.comments"}})],1),s("h4",[t._v("Gallery images")]),s("div",{staticClass:"form-group"},[s("b-button",{staticClass:"btn btn-primary",attrs:{value:"gallery"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-button",{staticClass:"btn btn-primary ml-2",attrs:{value:"gallery"},on:{click:function(e){return t.chooseImage(e)}}},[t._v("+ Select Images")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e(),s("div",{staticClass:"row"},t._l(t.currentPost.gallery,(function(e,i){return s("div",{key:i,ref:"div_"+i,refInFor:!0,staticClass:"col-sm-6 col-md-4 col-lg-4 gallery-cont p-0",on:{mouseover:function(e){return t.hoverDiv(i)},mouseout:function(e){return t.hoverDiv(-1)},click:function(s){return t.removeImage(e.id,t.currentPost.id)}}},[s("img",{staticClass:"img-fluid gallery-image",class:{selected:t.isSelected(i)},attrs:{src:e.url}}),s("div",{class:{selected:t.isSelected(i),mask:t.isSelected(i)}}),s("div",{staticClass:"delete-text",class:{selected:t.isSelected(i)}},[t._v("Delete")])])})),0)],1),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.editOnConfirm}},[t._v("Edit")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.editOnCancel}},[t._v("Cancel")])],1)],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.userPrompt,callback:function(e){t.userPrompt=e},expression:"userPrompt"}},[s("h5",[t._v("Duplicate image")]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]),s("p",[t._v("Duplicate image would you like to use this image ?")]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.confirm}},[t._v("Yes")]),s("b-button",{staticClass:"mr-2",on:{click:t.decline}},[t._v("No")])],1)]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.postChoice,callback:function(e){t.postChoice=e},expression:"postChoice"}},[s("b-form-group",{attrs:{label:"Images"}},[s("b-form-radio-group",{attrs:{id:"radio",name:"Images"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.images,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}}),s("b-form-radio",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.imageChoice,callback:function(e){t.imageChoice=e},expression:"imageChoice"}},[s("b-form-group",{attrs:{label:"Images"}},[s("b-form-checkbox-group",{attrs:{id:"checkbox",name:"Images"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.images,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}}),s("b-form-checkbox",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1)],1)},$e=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Title")]),s("th",{attrs:{scope:"col"}},[t._v("Excerpt")]),s("th",{attrs:{scope:"col"}},[t._v("Date")]),s("th",{attrs:{scope:"col"}},[t._v("Updated")]),s("th",{attrs:{scope:"col"}},[t._v("Action")])])])}],De=(s("4de4"),s("c975"),s("a434"),s("b85c")),Ue=s("1543"),Pe={data:function(){return{post:{image:"",title:"",main:"",comments:"",excerpt:"",date:"",gallery:""},currentPost:{},toDelete:null,toEdit:null,input:null,selected:[],select:"",selectedDiv:-1,currentGallery:[],imageChoice:null,postChoice:null,defaultDate:null,userPrompt:!1,newImageUpload:!1,newImage:null,deleteDialog:!1,editDialog:!1}},computed:{posts:function(){return this.$store.getters["posts/getPosts"]},request:function(){return this.$store.getters["images/getRequest"]},imageUrl:function(){return this.$store.getters["images/getImageUrl"]},confirmation:function(){return this.$store.getters["images/confirmation"]},images:function(){return this.$store.getters["images/getImages"]}},methods:{hoverDiv:function(t){this.selectedDiv=t},isSelected:function(t){return this.selectedDiv===t},deletePost:function(t){this.toDelete=t,this.deleteDialog=!0},deleteOnCancel:function(){this.deleteDialog=!1},deleteOnConfirm:function(){this.deleteDialog=!1,Ue.postsCollection.doc(this.toDelete.id).delete().catch((function(t){return alert(t.message)}))},editPost:function(t){this.toEdit=t,this.currentPost=t,this.defaultDate=t.date,this.editDialog=!0,this.post.image=this.currentPost.image,this.post.title=this.currentPost.title,this.post.main=this.currentPost.main,this.post.comments=this.currentPost.comments,this.post.excerpt=this.currentPost.excerpt,this.post.gallery=this.currentPost.gallery,this.post.imageId=this.currentPost.imageId},editOnCancel:function(){this.editDialog=!1,this.checkGallery()},editOnConfirm:function(){var t=this;""==this.post.date&&(this.post.date=this.defaultDate),this.editDialog=!1;var e=this.post.image,s=this.post.title,i=this.post.main,a=this.post.comments,r=this.post.excerpt,o=this.post.date,n=this.post.gallery,l=this.post.imageId;Ue.postsCollection.doc(this.toEdit.id).update({createdOn:new Date,image:e,imageId:l,title:s,comments:a,main:i,excerpt:r,date:o,gallery:n}).then((function(){t.currentPost={},t.post.image="",t.post.title="",t.post.main="",t.post.comments="",t.post.excerpt="",t.post.gallery="",t.post.imageId="",t.post.date="",t.newImage=!1,t.selected=[]})).catch((function(t){return alert(t.message)}))},addNewImage:function(t){"post"==t.target.value?(this.newImageUpload=!0,this.input="post"):"gallery"==t.target.value&&(this.newImageUpload=!0,this.input="gallery")},checkFile:function(t){var e=this,s=t.target.files[0],i=!1;Ue.imageUrlCollection.where("name","==",s.name).get().then((function(t){t.forEach((function(t){if(t.exists)return i=!0,void("post"==e.input?(e.post.image=t.data().url,e.newImage=!0,e.imageId=t.id,e.userPrompt=!0,e.$store.commit("images/setImageUrl",t.data().url)):"gallery"==e.input&&(e.imageId=t.id,e.userPrompt=!0,e.$store.commit("images/setImageUrl",t.data().url)))}))})).then((function(){i||e.$store.dispatch("images/uploadImage",s)}))},decline:function(){"post"==this.input?(this.userPrompt=!1,this.$store.commit("images/setImageUrl",null),this.imageId=null,this.$refs.fileInput.value="",this.post.image=null,this.input,this.newImage=!1):"gallery"==this.input&&(this.userPrompt=!1,this.imageId=null,this.$refs.galleryInput.value="",this.input,this.post.image=null,this.$store.commit("images/setImageUrl",null))},confirm:function(){var t=this;"gallery"==this.input?Ue.imageUrlCollection.doc(this.imageId).get().then((function(e){var s=e.data(),i={name:s.name,url:s.url,id:e.id};t.currentPost.gallery.push(i)})).then((function(){t.userPrompt=!1,t.$refs.galleryInput.value="",t.input="",t.newImageUpload=!1,t.$store.commit("images/setImageUrl",null)})):"post"==this.input&&(this.post.image=this.$store.getters["images/getImageUrl"],this.userPrompt=!1,this.$refs.fileInput.value="",this.newImageUpload=!1,this.$store.commit("images/setImageUrl",null),this.newImage=!0,this.input="")},close:function(){var t=this;if("post"==this.input)this.newImageUpload=!1,this.$refs.fileInput.value="",this.post.image=this.$store.getters["images/getImageUrl"],this.$store.commit("images/setImageUrl",null),this.input="";else if("gallery"==this.input){var e=this.$store.getters["images/getImageUrl"];Ue.imageUrlCollection.where("url","==",e).get().then((function(e){e.forEach((function(e){var s=e.data(),i={name:s.name,url:s.url,id:e.id};t.currentPost.gallery.push(i)}))})).then((function(){t.newImageUpload=!1,t.$refs.galleryInput.value="",t.$store.commit("images/setImageUrl",null),t.input=""}))}},chooseImage:function(t){if("post"==t.target.value)this.postChoice=!0,this.select=this.currentPost.imageId;else if("gallery"==t.target.value&&(this.imageChoice=!0,this.currentPost.gallery.length>0))for(var e=0;e<this.currentPost.gallery.length;e++){var s=this.currentPost.gallery[e].id;this.selected.push(s)}},confirmSelection:function(){var t=this;if(this.postChoice)Ue.imageUrlCollection.doc(this.select).get().then((function(e){var s=e.data();t.newImage=!0,t.post.image=s.url,t.post.imageId=e.id})).then((function(){t.postChoice=!1}));else if(this.imageChoice){var e=this.selected.filter((function(t){return null!=t})),s=this.getUnique(e);s.length>0?function(){var e=[];t.currentPost.gallery=[];for(var i=0;i<s.length;i++)Ue.imageUrlCollection.doc(s[i]).get().then((function(t){var s=t.data(),i={name:s.name,url:s.url,id:t.id};e.push(i)}));t.currentPost.gallery=e,t.post.gallery=e,t.imageChoice=!1}():this.currentPost.gallery=[]}},closeSel:function(){this.postChoice?this.postChoice=!1:this.imageChoice&&(this.imageChoice=!1,this.selected=[])},removeImage:function(t,e){for(var s=this,i=0;i<this.currentPost.gallery.length;i++)this.currentPost.gallery[i].id===t&&this.currentPost.gallery.splice(i,1);Ue.postsCollection.doc(e).get().then((function(t){var e=t.data();s.currentGallery=e.gallery}))},checkGallery:function(){this.currentGallery!==this.currentPost.gallery&&(this.currentPost.gallery=this.currentGallery)},getUnique:function(t){var e,s=[],i=Object(De["a"])(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;-1===s.indexOf(a)&&s.push(a)}}catch(r){i.e(r)}finally{i.f()}return s}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()},formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")}},created:function(){this.$store.dispatch("posts/setPosts"),this.$store.dispatch("images/setImages")}},Te=Pe,je=(s("623d"),Object(p["a"])(Te,Ie,$e,!1,null,"3853e3c9",null)),Oe=je.exports,Ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("History")]),s("hr",{staticClass:"balfe-line"}),s("b-nav",{attrs:{tabs:""}},[s("b-nav-item",{attrs:{to:"/dashboard/history/add_history"}},[t._v("Add history")]),s("b-nav-item",{attrs:{to:"/dashboard/history/list_history"}},[t._v("Manage history posts")])],1),s("router-view")],1)},qe=[],Se={},Ee=Object(p["a"])(Se,Ne,qe,!1,null,null,null),Le=Ee.exports,Re=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-left"},[s("h1",{staticClass:"text-left"},[t._v("Add historys")]),s("hr",{staticClass:"balfe-line"}),s("b-form",{on:{submit:function(e){return e.preventDefault(),t.submitHandler(e)}}},[s("h4",[t._v("Headline image")]),s("b-button",{staticClass:"btn btn-primary",attrs:{value:"history"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.history.image}})]),s("b-form-group",{staticClass:"text-left",attrs:{id:"title",label:"Title","label-for":"title"}},[s("b-input",{attrs:{id:"title",type:"text",required:"",placeholder:"Maximun 100 characters"},on:{blur:function(e){return t.$v.history.title.$touch()}},model:{value:t.history.title,callback:function(e){t.$set(t.history,"title","string"===typeof e?e.trim():e)},expression:"history.title"}}),t.$v.history.title.$error?s("p",{staticClass:"error-label"},[t._v("This input is required")]):t._e(),t.$v.history.title.maxLength?t._e():s("p",{staticClass:"error-label"},[t._v("Maximum of "+t._s(t.$v.history.title.$params.maxLength.max)+" characters")])],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"date",label:"Date","label-for":"date"}},[s("datepicker",{attrs:{id:"date",required:""},on:{blur:function(e){return t.$v.history.date.$touch()}},model:{value:t.history.date,callback:function(e){t.$set(t.history,"date",e)},expression:"history.date"}}),t.$v.history.date.$error?s("p",{staticClass:"error-label"},[t._v("Date required")]):t._e()],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"excerpt",label:"Excerpt","label-for":"excerpt"}},[s("b-input",{attrs:{id:"excerpt",type:"text",required:"",placeholder:"Maximun 500 characters"},on:{blur:function(e){return t.$v.history.excerpt.$touch()}},model:{value:t.history.excerpt,callback:function(e){t.$set(t.history,"excerpt","string"===typeof e?e.trim():e)},expression:"history.excerpt"}}),t.$v.history.excerpt.$error?s("p",{staticClass:"error-label"},[t._v("This input is required")]):t._e(),t.$v.history.excerpt.maxLength?t._e():s("p",{staticClass:"error-label"},[t._v("Maximum of "+t._s(t.$v.history.excerpt.$params.maxLength.max)+" characters")])],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"content",label:"Content","label-for":"content"}},[s("wysiwyg",{attrs:{id:"content"},model:{value:t.history.main,callback:function(e){t.$set(t.history,"main",e)},expression:"history.main"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"comments",label:"Comments","label-for":"comments"}},[s("wysiwyg",{attrs:{id:"comments"},model:{value:t.history.comments,callback:function(e){t.$set(t.history,"comments",e)},expression:"history.comments"}})],1),s("h4",[t._v("Gallery images")]),s("div",{staticClass:"form-group"},[s("b-button",{staticClass:"btn btn-primary",attrs:{value:"gallery"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-button",{staticClass:"btn btn-primary ml-2",on:{click:t.chooseImage}},[t._v("+ Select Images")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e(),s("div",{staticClass:"row"},t._l(t.galleryImages,(function(t,e){return s("div",{key:e,staticClass:"col-sm-6 col-md-4 col-lg-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}})])})),0),s("b-button",{attrs:{type:"submit",disabled:""==t.history.title,variant:"primary"}},[t._v("Add history")])],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.newImage,callback:function(e){t.newImage=e},expression:"newImage"}},[s("h5",[t._v("Upload a new image")]),s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[t.imageUrl?s("div",[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]):t._e()]),"history"==t.input?s("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),"gallery"==t.input?s("input",{ref:"galleryInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.close}},[t._v("Close")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e()],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.userPrompt,callback:function(e){t.userPrompt=e},expression:"userPrompt"}},[s("h5",[t._v("Duplicate image")]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]),s("p",[t._v("Duplicate image would you like to use this image ?")]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.confirm}},[t._v("Yes")]),s("b-button",{staticClass:"mr-2",on:{click:t.decline}},[t._v("No")])],1)]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.imageChoice,callback:function(e){t.imageChoice=e},expression:"imageChoice"}},[s("b-form-group",{attrs:{label:"Images"}},[s("b-form-checkbox-group",{attrs:{id:"checkbox",name:"Images"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.images,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}}),s("b-form-checkbox",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1),s("b-modal",{attrs:{"hide-footer":"","hide-header":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("div",{staticClass:"d-block text-center"},[s("p",[t._v("Your history has no content are you sure you want to history this ?")])]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.dialogOnCancel}},[t._v("Close")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.dialogOnConfirm}},[t._v("Add history")])],1)]),t.historyAdded?s("div",{attrs:{variant:"success"}},[t._v("Your history has been added!")]):t._e(),""!==t.errorMsg?s("div",{staticClass:"error-msg"},[s("p",[t._v(t._s(t.errorMsg))])]):t._e()],1)},Me=[],Ae=s("1543"),Fe={data:function(){return{history:{image:"",title:"",main:"",comments:"",excerpt:"",date:"",gallery:""},galleryImages:[],fullHistoricPost:{},historyAdded:null,selected:[],type:"",newImage:!1,uploadSucsess:!1,imageChoice:!1,userPrompt:!1,dialog:!1,errorMsg:"",performingRequest:!1,imageId:null,exist:!1,input:null}},validations:{history:{title:{required:Dt["required"],maxLength:Object(Dt["maxLength"])(100)},excerpt:{required:Dt["required"],maxLength:Object(Dt["maxLength"])(500)},date:{required:Dt["required"]}}},methods:{createhistory:function(){var t=this;Ae.historicCollection.add({createdOn:new Date,imageId:this.imageId,image:this.history.image,main:this.history.main,title:this.history.title,comments:this.history.comments,excerpt:this.history.excerpt,date:this.history.date,gallery:this.galleryImages}).then((function(){t.historyAdded=!0,t.$v.$reset(),t.history.main="",t.history.comments="",t.history.image="",t.history.title="",t.history.excerpt="",t.history.date="",t.exist=!1,t.galleryImages=[],t.imageId=null,t.$store.commit("images/setImageUrl",null),setInterval((function(){t.historyAdded=null}),3e3)})).catch((function(e){t.errorMsg=e.message}))},addNewImage:function(t){this.newImage=!0,"history"==t.target.value?this.input="history":"gallery"==t.target.value&&(this.input="gallery")},checkFile:function(t){var e=this,s=t.target.files[0],i=!1;Ae.imageUrlCollection.where("name","==",s.name).get().then((function(t){t.forEach((function(t){if(t.exists)return i=!0,void(e.$refs.fileInput?(e.history.image=t.data().url,e.imageId=t.id,e.userPrompt=!0,e.$store.commit("images/setImageUrl",t.data().url),e.type="history"):e.$refs.galleryInput&&(e.$store.commit("images/setImageUrl",t.data().url),e.imageId=t.id,e.userPrompt=!0,e.type="gallery"))}))})).then((function(){i||e.$store.dispatch("images/uploadImage",s)}))},decline:function(){"history"==this.type?(this.userPrompt=!1,this.$store.commit("images/setImageUrl",null),this.imageId=null,this.$refs.fileInput.value="",this.history.image=null):"gallery"==this.type&&(this.userPrompt=!1,this.imageId=null,this.$refs.galleryInput.value="")},confirm:function(){var t=this;"gallery"==this.type?Ae.imageUrlCollection.doc(this.imageId).get().then((function(e){var s=e.data(),i={name:s.name,url:s.url,id:e.id};t.galleryImages.push(i)})).then((function(){t.userPrompt=!1,t.imageId=null,t.$refs.galleryInput.value="",t.type="",t.$store.commit("images/setImageUrl",null),t.newImage=!1})):"history"==this.type&&(this.history.image=this.$store.getters["images/getImageUrl"],this.userPrompt=!1,this.$refs.fileInput.value="",this.type="",this.newImage=!1,this.$store.commit("images/setImageUrl",null))},close:function(){var t=this;if("history"==this.input){this.newImage=!1,this.$refs.fileInput.value="";var e=this.$store.getters["images/getImageUrl"];this.history.image=e,this.$store.commit("images/setImageUrl",null),this.type="",Ae.imageUrlCollection.where("url","==",e).get().then((function(e){e.forEach((function(e){t.imageId=e.id}))}))}else if("gallery"==this.input){this.$store.dispatch("images/getImage",this.$store.getters["images/getImageUrl"]);var s=this.$store.getters["images/getImage"];if(s){var i={name:s.name,url:s.url,id:this.imageId};this.galleryImages.push(i)}this.newImage=!1,this.$refs.galleryInput.value="",this.$store.commit("images/setImageUrl",null),this.type=""}},chooseImage:function(){this.imageChoice=!0},confirmSelection:function(){for(var t=this,e=0;e<this.selected.length;e++){var s=this.selected[e];Ae.imageUrlCollection.doc(s).get().then((function(e){var s=e.data(),i={name:s.name,url:s.url,id:e.id};t.galleryImages.push(i)})).then((function(){t.imageChoice=!1}))}},closeSel:function(){this.imageChoice=!1},submitHandler:function(){this.$v.$invalid?alert("Something is wrong"):""===this.history.main?this.dialog=!0:this.createhistory()},dialogOnCancel:function(){this.dialog=!1},dialogOnConfirm:function(){this.dialog=!1,this.createhistory()}},computed:{request:function(){return this.$store.getters["images/getRequest"]},imageUrl:function(){return this.$store.getters["images/getImageUrl"]},confirmation:function(){return this.$store.getters["images/confirmation"]},images:function(){return this.$store.getters["images/getImages"]}},created:function(){this.$store.dispatch("images/getImages")}},He=Fe,ze=(s("e507"),Object(p["a"])(He,Re,Me,!1,null,"a7e2aea6",null)),Ge=ze.exports,Ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Manage history posts")]),s("hr",{staticClass:"balfe-line"}),t.allHistory.length>0?s("div",[s("table",{staticClass:"table table-striped table-hover text-left"},[t._m(0),s("tbody",t._l(t.allHistory,(function(e,i){return s("tr",{key:i},[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.title))]),s("td",[t._v(t._s(e.excerpt))]),s("td",[t._v(t._s(t._f("formatDate")(e.date)))]),s("td",[t._v(t._s(t._f("formatCreation")(e.createdOn)))]),s("td",[s("div",{staticClass:"d-inline px-1 text-dark",on:{click:function(s){return t.edithistory(e)}}},[t._v("Edit")]),s("div",{staticClass:"d-inline px-1 text-primary",on:{click:function(s){return t.deletehistory(e)}}},[t._v("Delete")])])])})),0)])]):s("div",[t._v("Sorry no history posts yet .......... Add some!")]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.newImageUpload,callback:function(e){t.newImageUpload=e},expression:"newImageUpload"}},[s("h5",[t._v("Upload a new image")]),s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[t.imageUrl?s("div",[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]):t._e()]),"history"==t.input?s("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),"gallery"==t.input?s("input",{ref:"galleryInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.close}},[t._v("Close")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e()],1),s("b-modal",{attrs:{"hide-footer":"","hide-header":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[s("div",{staticClass:"d-block text-center"},[s("p",[t._v(" Are you sure you want to delete this history post? ( there's no turning back ) ")])]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.deleteOnConfirm}},[t._v("Yes, delete")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.deleteOnCancel}},[t._v("No, do not delete it")])],1)]),s("b-modal",{attrs:{"hide-footer":"","hide-header":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("div",{staticClass:"text-center"},[t.newImage?t._e():s("img",{staticClass:"img-fluid",attrs:{src:t.currentHistory.image}}),t.newImage?s("img",{staticClass:"img-fluid",attrs:{src:t.history.image}}):t._e()]),s("b-button",{staticClass:"btn btn-primary mt-3",attrs:{value:"history"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-button",{staticClass:"btn btn-primary ml-2 mt-3",attrs:{value:"history"},on:{click:function(e){return t.chooseImage(e)}}},[t._v("+ Select Image")]),s("b-form-group",{staticClass:"text-left",attrs:{id:"date",label:"Date","label-for":"date"}},[s("datepicker",{attrs:{id:"date"},model:{value:t.history.date,callback:function(e){t.$set(t.history,"date",e)},expression:"history.date"}}),s("span",[t._v("Current date: "+t._s(t._f("formatDate")(t.currentHistory.date)))])],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"title",label:"Title","label-for":"title"}},[s("b-input",{attrs:{id:"title",type:"text",placeholder:t.currentHistory.title},model:{value:t.history.title,callback:function(e){t.$set(t.history,"title","string"===typeof e?e.trim():e)},expression:"history.title"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"excerpt",label:"Excerpt","label-for":"excerpt"}},[s("b-input",{attrs:{id:"excerpt",type:"text",placeholder:t.currentHistory.excerpt},model:{value:t.history.excerpt,callback:function(e){t.$set(t.history,"excerpt","string"===typeof e?e.trim():e)},expression:"history.excerpt"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"main",label:"Main","label-for":"main"}},[s("wysiwyg",{attrs:{id:"main",value:t.currentHistory.main},model:{value:t.history.main,callback:function(e){t.$set(t.history,"main",e)},expression:"history.main"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"comments",label:"Comments","label-for":"comments"}},[s("wysiwyg",{attrs:{id:"comments",value:t.currentHistory.comments},model:{value:t.history.comments,callback:function(e){t.$set(t.history,"comments",e)},expression:"history.comments"}})],1),s("h4",[t._v("Gallery images")]),s("div",{staticClass:"form-group"},[s("b-button",{staticClass:"btn btn-primary",attrs:{value:"gallery"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-button",{staticClass:"btn btn-primary ml-2",attrs:{value:"gallery"},on:{click:function(e){return t.chooseImage(e)}}},[t._v("+ Select Images")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e(),s("div",{staticClass:"row"},t._l(t.currentHistory.gallery,(function(e,i){return s("div",{key:i,ref:"div_"+i,refInFor:!0,staticClass:"col-sm-6 col-md-4 col-lg-4 gallery-cont p-0",on:{mouseover:function(e){return t.hoverDiv(i)},mouseout:function(e){return t.hoverDiv(-1)},click:function(s){return t.removeImage(e.id,t.currentHistory.id)}}},[s("img",{staticClass:"img-fluid gallery-image",class:{selected:t.isSelected(i)},attrs:{src:e.url}}),s("div",{class:{selected:t.isSelected(i),mask:t.isSelected(i)}}),s("div",{staticClass:"delete-text",class:{selected:t.isSelected(i)}},[t._v("Delete")])])})),0)],1),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.editOnConfirm}},[t._v("Edit")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.editOnCancel}},[t._v("Cancel")])],1)],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.userPrompt,callback:function(e){t.userPrompt=e},expression:"userPrompt"}},[s("h5",[t._v("Duplicate image")]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]),s("p",[t._v("Duplicate image would you like to use this image ?")]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.confirm}},[t._v("Yes")]),s("b-button",{staticClass:"mr-2",on:{click:t.decline}},[t._v("No")])],1)]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.historyChoice,callback:function(e){t.historyChoice=e},expression:"historyChoice"}},[s("b-form-group",{attrs:{label:"Images"}},[s("b-form-radio-group",{attrs:{id:"radio",name:"Images"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.images,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}}),s("b-form-radio",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.imageChoice,callback:function(e){t.imageChoice=e},expression:"imageChoice"}},[s("b-form-group",{attrs:{label:"Images"}},[s("b-form-checkbox-group",{attrs:{id:"checkbox",name:"Images"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.images,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}}),s("b-form-checkbox",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1)],1)},Ve=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Title")]),s("th",{attrs:{scope:"col"}},[t._v("Excerpt")]),s("th",{attrs:{scope:"col"}},[t._v("Date")]),s("th",{attrs:{scope:"col"}},[t._v("Updated")]),s("th",{attrs:{scope:"col"}},[t._v("Action")])])])}],Be=s("1543"),Qe={data:function(){return{history:{image:"",title:"",main:"",comments:"",excerpt:"",date:"",gallery:""},currentHistory:{},toDelete:null,toEdit:null,input:null,selected:[],select:"",selectedDiv:-1,currentGallery:[],imageChoice:null,historyChoice:null,defaultDate:null,userPrompt:!1,newImageUpload:!1,newImage:null,deleteDialog:!1,editDialog:!1}},computed:{allHistory:function(){return this.$store.getters["history/getAllHistory"]},request:function(){return this.$store.getters["images/getRequest"]},imageUrl:function(){return this.$store.getters["images/getImageUrl"]},confirmation:function(){return this.$store.getters["images/confirmation"]},images:function(){return this.$store.getters["images/getImages"]}},methods:{hoverDiv:function(t){this.selectedDiv=t},isSelected:function(t){return this.selectedDiv===t},deletehistory:function(t){this.toDelete=t,this.deleteDialog=!0},deleteOnCancel:function(){this.deleteDialog=!1},deleteOnConfirm:function(){this.deleteDialog=!1,Be.historicCollection.doc(this.toDelete.id).delete().catch((function(t){return alert(t.message)}))},edithistory:function(t){this.toEdit=t,this.currentHistory=t,this.defaultDate=t.date,this.editDialog=!0,this.history.image=this.currentHistory.image,this.history.title=this.currentHistory.title,this.history.main=this.currentHistory.main,this.history.comments=this.currentHistory.comments,this.history.excerpt=this.currentHistory.excerpt,this.history.gallery=this.currentHistory.gallery,this.history.imageId=this.currentHistory.imageId},editOnCancel:function(){this.editDialog=!1,this.checkGallery()},editOnConfirm:function(){var t=this;""==this.history.date&&(this.history.date=this.defaultDate),this.editDialog=!1;var e=this.history.image,s=this.history.title,i=this.history.main,a=this.history.comments,r=this.history.excerpt,o=this.history.date,n=this.history.gallery,l=this.history.imageId;Be.historicCollection.doc(this.toEdit.id).update({createdOn:new Date,image:e,imageId:l,title:s,comments:a,main:i,excerpt:r,date:o,gallery:n}).then((function(){t.currentHistory={},t.history.image="",t.history.title="",t.history.main="",t.history.comments="",t.history.excerpt="",t.history.gallery="",t.history.imageId="",t.history.date="",t.newImage=!1,t.selected=[]})).catch((function(t){return alert(t.message)}))},addNewImage:function(t){"history"==t.target.value?(this.newImageUpload=!0,this.input="history"):"gallery"==t.target.value&&(this.newImageUpload=!0,this.input="gallery")},checkFile:function(t){var e=this,s=t.target.files[0],i=!1;Be.imageUrlCollection.where("name","==",s.name).get().then((function(t){t.forEach((function(t){if(t.exists)return i=!0,void("history"==e.input?(e.history.image=t.data().url,e.newImage=!0,e.imageId=t.id,e.userPrompt=!0,e.$store.commit("images/setImageUrl",t.data().url)):"gallery"==e.input&&(e.imageId=t.id,e.userPrompt=!0,e.$store.commit("images/setImageUrl",t.data().url)))}))})).then((function(){i||e.$store.dispatch("images/uploadImage",s)}))},decline:function(){"history"==this.input?(this.userPrompt=!1,this.$store.commit("images/setImageUrl",null),this.imageId=null,this.$refs.fileInput.value="",this.history.image=null,this.input,this.newImage=!1):"gallery"==this.input&&(this.userPrompt=!1,this.imageId=null,this.$refs.galleryInput.value="",this.input,this.history.image=null,this.$store.commit("images/setImageUrl",null))},confirm:function(){var t=this;"gallery"==this.input?Be.imageUrlCollection.doc(this.imageId).get().then((function(e){var s=e.data(),i={name:s.name,url:s.url,id:e.id};t.currentHistory.gallery.push(i)})).then((function(){t.userPrompt=!1,t.$refs.galleryInput.value="",t.input="",t.newImageUpload=!1,t.$store.commit("images/setImageUrl",null)})):"history"==this.input&&(this.history.image=this.$store.getters["images/getImageUrl"],this.userPrompt=!1,this.$refs.fileInput.value="",this.newImageUpload=!1,this.$store.commit("images/setImageUrl",null),this.newImage=!0,this.input="")},close:function(){var t=this;if("history"==this.input)this.newImageUpload=!1,this.$refs.fileInput.value="",this.history.image=this.$store.getters["images/getImageUrl"],this.$store.commit("images/setImageUrl",null),this.input="";else if("gallery"==this.input){var e=this.$store.getters["images/getImageUrl"];Be.imageUrlCollection.where("url","==",e).get().then((function(e){e.forEach((function(e){var s=e.data(),i={name:s.name,url:s.url,id:e.id};t.currentHistory.gallery.push(i)}))})).then((function(){t.newImageUpload=!1,t.$refs.galleryInput.value="",t.$store.commit("images/setImageUrl",null),t.input=""}))}},chooseImage:function(t){if("history"==t.target.value)this.historyChoice=!0,this.select=this.currentHistory.imageId;else if("gallery"==t.target.value&&(this.imageChoice=!0,this.currentHistory.gallery.length>0))for(var e=0;e<this.currentHistory.gallery.length;e++){var s=this.currentHistory.gallery[e].id;this.selected.push(s)}},confirmSelection:function(){var t=this;if(this.historyChoice)Be.imageUrlCollection.doc(this.select).get().then((function(e){var s=e.data();t.newImage=!0,t.history.image=s.url,t.history.imageId=e.id})).then((function(){t.historyChoice=!1}));else if(this.imageChoice){var e=this.selected.filter((function(t){return null!=t})),s=this.getUnique(e);s.length>0?function(){var e=[];t.currentHistory.gallery=[];for(var i=0;i<s.length;i++)Be.imageUrlCollection.doc(s[i]).get().then((function(t){var s=t.data(),i={name:s.name,url:s.url,id:t.id};e.push(i)}));t.currentHistory.gallery=e,t.history.gallery=e,t.imageChoice=!1}():this.currentHistory.gallery=[]}},closeSel:function(){this.historyChoice?this.historyChoice=!1:this.imageChoice&&(this.imageChoice=!1,this.selected=[])},removeImage:function(t,e){for(var s=this,i=0;i<this.currentHistory.gallery.length;i++)this.currentHistory.gallery[i].id===t&&this.currentHistory.gallery.splice(i,1);Be.historicCollection.doc(e).get().then((function(t){var e=t.data();s.currentGallery=e.gallery}))},checkGallery:function(){this.currentGallery!==this.currentHistory.gallery&&(this.currentHistory.gallery=this.currentGallery)},getUnique:function(t){var e,s=[],i=Object(De["a"])(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;-1===s.indexOf(a)&&s.push(a)}}catch(r){i.e(r)}finally{i.f()}return s}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()},formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")}},created:function(){this.$store.dispatch("history/setAllHistory"),this.$store.dispatch("images/setImages")}},We=Qe,Ke=(s("8cbb"),Object(p["a"])(We,Ye,Ve,!1,null,"705dc61a",null)),Je=Ke.exports,Xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Partners")]),s("hr",{staticClass:"balfe-line"}),s("b-nav",{attrs:{tabs:""}},[s("b-nav-item",{attrs:{to:"/dashboard/partners/add_partners"}},[t._v("Add partner")]),s("b-nav-item",{attrs:{to:"/dashboard/partners/list_partners"}},[t._v("Manage partners")])],1),s("router-view")],1)},Ze=[],ts={},es=Object(p["a"])(ts,Xe,Ze,!1,null,null,null),ss=es.exports,is=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-left"},[s("h1",{staticClass:"text-left"},[t._v("Add partner")]),s("hr",{staticClass:"balfe-line"}),s("b-form",{on:{submit:function(e){return e.preventDefault(),t.submitHandler(e)}}},[s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.partner.logo}})]),s("b-button",{staticClass:"btn btn-primary",attrs:{value:"partner"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-form-group",{staticClass:"text-left",attrs:{id:"name",label:"Name","label-for":"name"}},[s("b-input",{attrs:{id:"name",type:"text",required:"",placeholder:"Partner name"},model:{value:t.partner.name,callback:function(e){t.$set(t.partner,"name","string"===typeof e?e.trim():e)},expression:"partner.name"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"desc",label:"Description","label-for":"desc"}},[s("wysiwyg",{attrs:{id:"desc"},model:{value:t.partner.desc,callback:function(e){t.$set(t.partner,"desc",e)},expression:"partner.desc"}})],1),s("b-button",{attrs:{type:"submit",disabled:""==t.partner.desc,variant:"primary"}},[t._v("Add partner")])],1),t.partnerAdded?s("div",{staticClass:"text-success"},[t._v("Your partner has been added!")]):t._e(),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.newImage,callback:function(e){t.newImage=e},expression:"newImage"}},[s("h5",[t._v("Upload a new image")]),s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[t.logoUrl?s("div",[s("img",{staticClass:"img-fluid",attrs:{src:t.logoUrl}})]):t._e()]),"partner"==t.input?s("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.close}},[t._v("Close")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e()],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.userPrompt,callback:function(e){t.userPrompt=e},expression:"userPrompt"}},[s("h5",[t._v("Duplicate image")]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.logoUrl}})]),s("p",[t._v("Duplicate image would you like to use this image ?")]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.confirm}},[t._v("Yes")]),s("b-button",{staticClass:"mr-2",on:{click:t.decline}},[t._v("No")])],1)])],1)},as=[],rs=s("1543"),os={data:function(){return{partner:{name:"",desc:"",logo:""},logoId:null,partnerAdded:null,userPrompt:null,newImage:null,input:null}},validations:{partner:{name:{required:Dt["required"]}}},methods:{addNewImage:function(t){this.newImage=!0,"partner"==t.target.value&&(this.input="partner")},checkFile:function(t){var e=this,s=t.target.files[0],i=!1;rs.logosCollection.where("name","==",s.name).get().then((function(t){t.forEach((function(t){if(t.exists)return i=!0,void(e.$refs.fileInput&&(e.partner.logo=t.data().url,e.logoId=t.id,e.userPrompt=!0,e.$store.commit("images/setLogoUrl",t.data().url),e.type="partner"))}))})).then((function(){i||e.$store.dispatch("images/uploadLogo",s)}))},decline:function(){"partner"==this.type&&(this.userPrompt=!1,this.$store.commit("images/setLogoUrl",null),this.logoId=null,this.$refs.fileInput.value="",this.partner.logo=null,this.type)},confirm:function(){"partner"==this.type&&(this.partner.logo=this.$store.getters["images/getLogoUrl"],this.userPrompt=!1,this.$refs.fileInput.value="",this.type="",this.newImage=!1,this.$store.commit("images/setLogoUrl",null))},close:function(){var t=this;if("partner"==this.input){var e=this.$store.getters["images/getLogoUrl"];this.partner.logo=e,this.newImage=!1,rs.logosCollection.where("url","==",e).get().then((function(e){e.forEach((function(e){t.logoId=e.id}))})),this.$refs.fileInput.value="",this.$store.commit("images/setLogoUrl",null),this.type=""}},submitHandler:function(){var t=this;this.$store.commit("images/setRequest",!0),rs.partnersCollection.add({name:this.partner.name,desc:this.partner.desc,logoUrl:this.partner.logo,logoId:this.logoId,createdOn:new Date}).then((function(){t.partner.name="",t.partner.desc="",t.partner.logo="",t.logoId="",t.$v.$reset(),t.partnerAdded=!0,t.$store.commit("images/setRequest",!1),t.$store.commit("images/setLogoUrl",null),setTimeout((function(){t.partnerAdded=!1}),3e3)}))}},computed:{request:function(){return this.$store.getters["images/getRequest"]},confirmation:function(){return this.$store.getters["images/confirmation"]},logoUrl:function(){return this.$store.getters["images/getLogoUrl"]}}},ns=os,ls=Object(p["a"])(ns,is,as,!1,null,null,null),cs=ls.exports,ds=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Manage partners")]),s("hr",{staticClass:"balfe-line"}),t.partners.length>0?s("div",[s("table",{staticClass:"table table-striped table-hover text-left"},[t._m(0),s("tbody",t._l(t.partners,(function(e,i){return s("tr",{key:i},[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),s("td",[s("img",{staticClass:"img-fluid",attrs:{src:e.logoUrl,width:"200px"}})]),s("td",[t._v(t._s(e.desc))]),s("td",[t._v(t._s(t._f("formatCreation")(e.createdOn)))]),s("td",[s("div",{staticClass:"d-inline px-1 text-dark",on:{click:function(s){return t.editPartner(e)}}},[t._v("Edit")]),s("div",{staticClass:"d-inline px-1 text-primary",on:{click:function(s){return t.deletePartner(e)}}},[t._v("Delete")])])])})),0)])]):s("div",[t._v("Sorry no partners yet .......... Add some!")]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.newImageUpload,callback:function(e){t.newImageUpload=e},expression:"newImageUpload"}},[s("h5",[t._v("Upload a new image")]),s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[t.logoUrl?s("div",[s("img",{staticClass:"img-fluid",attrs:{src:t.logoUrl}})]):t._e()]),"partner"==t.input?s("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.close}},[t._v("Close")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e()],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"lg"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[s("div",{staticClass:"d-block text-center"},[s("p",[t._v(" Are you sure you want to delete this partner ? ( there's no turning back ) ")])]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.deleteOnConfirm}},[t._v("Yes, delete")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.deleteOnCancel}},[t._v("No, do not delete it")])],1)]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("div",[t.newImage?t._e():s("img",{staticClass:"img-fluid",attrs:{src:t.currentPartner.logoUrl}}),t.newImage?s("img",{staticClass:"img-fluid",attrs:{src:t.partner.logoUrl}}):t._e()]),s("b-button",{staticClass:"btn btn-primary",attrs:{value:"partner"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-button",{staticClass:"btn btn-primary ml-2",attrs:{value:"partner"},on:{click:function(e){return t.chooseImage(e)}}},[t._v("+ Select Image")]),s("b-form-group",{staticClass:"text-left",attrs:{id:"name",label:"name","label-for":"name"}},[s("b-input",{attrs:{id:"name",type:"text",placeholder:t.currentPartner.name},model:{value:t.partner.name,callback:function(e){t.$set(t.partner,"name","string"===typeof e?e.trim():e)},expression:"partner.name"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"description",label:"Description","label-for":"description"}},[s("wysiwyg",{attrs:{id:"description"},model:{value:t.partner.desc,callback:function(e){t.$set(t.partner,"desc",e)},expression:"partner.desc"}},[t._v(" "+t._s(t.currentPartner.desc)+" ")])],1)],1),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.editOnConfirm}},[t._v("Edit")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.editOnCancel}},[t._v("Cancel")])],1)],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.userPrompt,callback:function(e){t.userPrompt=e},expression:"userPrompt"}},[s("h5",[t._v("Duplicate image")]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.logoUrl}})]),s("p",[t._v("Duplicate image would you like to use this image ?")]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.confirm}},[t._v("Yes")]),s("b-button",{staticClass:"mr-2",on:{click:t.decline}},[t._v("No")])],1)]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.logoChoice,callback:function(e){t.logoChoice=e},expression:"logoChoice"}},[s("b-form-group",{attrs:{label:"Logos"}},[s("b-form-radio-group",{attrs:{id:"radio",name:"Logos"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.logos,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}}),s("b-form-radio",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1)],1)},us=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Name")]),s("th",{attrs:{scope:"col"}},[t._v("Logo")]),s("th",{attrs:{scope:"col"}},[t._v("Description")]),s("th",{attrs:{scope:"col"}},[t._v("Updated")]),s("th",{attrs:{scope:"col"}},[t._v("Action")])])])}],ms=s("1543"),gs={data:function(){return{partner:{name:"",desc:"",logoUrl:"",logoId:""},newImage:!1,newImageUpload:!1,input:null,select:null,userPrompt:null,logoChoice:null,deleteDialog:!1,editDialog:!1,currentPartner:{},toDelete:null,toEdit:null}},computed:{partners:function(){return this.$store.getters["partners/getPartners"]},request:function(){return this.$store.getters["images/getRequest"]},logoUrl:function(){return this.$store.getters["images/getLogoUrl"]},confirmation:function(){return this.$store.getters["images/confirmation"]},logos:function(){return this.$store.getters["images/getLogos"]}},methods:{deletePartner:function(t){this.toDelete=t,this.deleteDialog=!0},deleteOnCancel:function(){this.deleteDialog=!1},deleteOnConfirm:function(){this.deleteDialog=!1,ms.partnersCollection.doc(this.toDelete.id).delete()},editPartner:function(t){this.toEdit=t,this.currentPartner=t,this.editDialog=!0,this.partner.logo=this.currentPartner.logo,this.partner.name=this.currentPartner.name,this.partner.desc=this.currentPartner.desc,this.partner.logoId=this.currentPartner.logoId},editOnCancel:function(){this.editDialog=!1,this.currentPartner={}},editOnConfirm:function(){var t=this;this.editDialog=!1;var e=this.partner.logoUrl,s=this.partner.name,i=this.partner.desc,a=this.partner.logoId;ms.partnersCollection.doc(this.toEdit.id).update({createdOn:new Date,logoUrl:e,name:s,desc:i,logoId:a}).then((function(){t.currentPartner={},t.newImage=!1,t.partner.logoId="",t.partner.logoUrl="",t.partner.name="",t.partner.desc="",t.logoId=""})).catch((function(t){return alert(t.message)}))},addNewImage:function(t){"partner"==t.target.value&&(this.newImageUpload=!0,this.input="partner")},checkFile:function(t){var e=this,s=t.target.files[0],i=!1;ms.logosCollection.where("name","==",s.name).get().then((function(t){t.forEach((function(t){if(t.exists)return i=!0,void("partner"==e.input&&(e.partner.logoUrl=t.data().url,e.newImage=!0,e.logoId=t.id,e.userPrompt=!0,e.$store.commit("images/setLogoUrl",t.data().url)))}))})).then((function(){i||e.$store.dispatch("images/uploadLogo",s)}))},decline:function(){"partner"==this.input&&(this.userPrompt=!1,this.$store.commit("images/setImageUrl",null),this.logoId=null,this.$refs.fileInput.value="",this.partner.logoUrl=null,this.input,this.newImage=!1)},confirm:function(){"partner"==this.input&&(this.partner.logoUrl=this.$store.getters["images/getLogoUrl"],this.partner.logoId=this.logoId,this.userPrompt=!1,this.$refs.fileInput.value="",this.newImageUpload=!1,this.$store.commit("images/setLogoUrl",null),this.newImage=!0,this.input="")},close:function(){var t=this;if("partner"==this.input){var e=this.$store.getters["images/getLogoUrl"];this.partner.logoUrl=e,this.newImageUpload=!1,ms.logosCollection.where("url","==",e).get().then((function(e){e.forEach((function(e){t.partner.logoId=e.id}))})),this.$refs.fileInput.value="",this.$store.commit("images/setLogoUrl",null),this.input=""}},chooseImage:function(t){"partner"==t.target.value&&(this.logoChoice=!0,this.select=this.currentPartner.logoId)},confirmSelection:function(){var t=this;this.logoChoice&&ms.logosCollection.doc(this.select).get().then((function(e){var s=e.data();t.newImage=!0,t.partner.logoUrl=s.url,t.partner.logoId=e.id})).then((function(){t.logoChoice=!1,t.select=null}))},closeSel:function(){this.logoChoice&&(this.logoChoice=!1,this.select=null)}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()},formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")}},created:function(){this.$store.dispatch("partners/setPartners"),this.$store.dispatch("images/setLogos")}},fs=gs,hs=(s("cd68"),Object(p["a"])(fs,ds,us,!1,null,null,null)),ps=hs.exports,vs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Media Section")]),s("hr",{staticClass:"balfe-line"}),s("b-nav",{attrs:{tabs:""}},[s("b-nav-item",{attrs:{to:"/dashboard/media/"}},[t._v("Gallery")]),s("b-nav-item",{attrs:{to:"/dashboard/media/images"}},[t._v("Images")]),s("b-nav-item",{attrs:{to:"/dashboard/media/videos"}},[t._v("Videos")]),s("b-nav-item",{attrs:{to:"/dashboard/media/logos"}},[t._v("Logos")])],1),s("router-view")],1)},bs=[],Cs={},_s=Object(p["a"])(Cs,vs,bs,!1,null,null,null),ks=_s.exports,ys=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Gallery")]),s("b-nav",{attrs:{tabs:""}},[s("b-button",{staticClass:"btn btn-primary mx-1",attrs:{value:"image"},on:{click:function(e){return t.addNew(e)}}},[t._v("New image")]),s("b-button",{staticClass:"btn btn-primary mx-1",attrs:{value:"image"},on:{click:function(e){return t.chooseContent(e)}}},[t._v("Select image")]),s("b-button",{staticClass:"btn btn-primary mx-1",attrs:{value:"video"},on:{click:function(e){return t.addNew(e)}}},[t._v("New video")]),s("b-button",{staticClass:"btn btn-primary mx-1",attrs:{value:"video",v:""},on:{click:function(e){return t.chooseContent(e)}}},[t._v("Select video")])],1),t.galleryContent.length>0?s("div",{staticClass:"container-fluid"},[s("h5",{staticClass:"mt-3"},[t._v("Gallery Content")]),s("div",{staticClass:"row"},t._l(t.galleryContent,(function(e,i){return s("div",{key:i,staticClass:"col-6 col-md-4 col-lg-2"},[e.imageId?s("img",{staticClass:"img-fluid",attrs:{src:e.url}}):t._e(),e.videoId?s("b-embed",{attrs:{type:"iframe",aspect:"16by9",src:e.url,allowfullscreen:""}}):t._e(),s("p",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),s("div",{staticClass:"d-block"},[s("p",{staticClass:"d-inline"},[t._v("Uploaded: "+t._s(t._f("formatCreation")(e.createdOn)))]),s("div",{staticClass:"d-inline px-1 text-primary",on:{click:function(s){return t.removeContent(e)}}},[t._v("Remove")])])],1)})),0)]):s("div",[s("p",{staticClass:"text-left"},[t._v("Please select content to be displayed in the gallery or add some")])]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.newUpload,callback:function(e){t.newUpload=e},expression:"newUpload"}},["image"==t.input?s("h5",[t._v("Upload a new image")]):t._e(),"video"==t.input?s("h5",[t._v("Upload a new video")]):t._e(),s("transition",{attrs:{name:"fade"}},[t.imageRequest?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("transition",{attrs:{name:"fade"}},[t.videoRequest?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[t.imageUrl?s("div",[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]):t._e(),t.videoUrl?s("div",[s("b-embed",{attrs:{type:"iframe",aspect:"16by9",src:t.videoUrl,allowfullscreen:""}})],1):t._e()]),"image"==t.input?s("input",{ref:"imageInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),"video"==t.input?s("input",{ref:"videoInput",attrs:{type:"file",accept:"video/*"},on:{change:t.checkFile}}):t._e(),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.close}},[t._v("Close")])],1),t.videoConfirm?s("p",{staticClass:"text-success"},[t._v("Video uploaded sucsessfully!")]):t._e(),t.imageConfirm?s("p",{staticClass:"text-success"},[t._v("Image uploaded sucsessfully!")]):t._e()],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.userPrompt,callback:function(e){t.userPrompt=e},expression:"userPrompt"}},["image"==t.input?s("h5",[t._v("Duplicate image")]):t._e(),"video"==t.input?s("h5",[t._v("Duplicate video")]):t._e(),"image"==t.input?s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]):t._e(),"video"==t.input?s("div",{staticClass:"container"},[s("b-embed",{attrs:{type:"iframe",aspect:"16by9",src:t.videoUrl,allowfullscreen:""}})],1):t._e(),s("p",[t._v("Duplicate content would you like to use this ?")]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.confirm}},[t._v("Yes")]),s("b-button",{staticClass:"mr-2",on:{click:t.decline}},[t._v("No")])],1)]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.imageChoice,callback:function(e){t.imageChoice=e},expression:"imageChoice"}},[s("b-form-group",{attrs:{label:"Images"}},[s("b-form-checkbox-group",{attrs:{id:"checkbox",name:"Images"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.images,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}}),s("b-form-checkbox",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.videoChoice,callback:function(e){t.videoChoice=e},expression:"videoChoice"}},[s("b-form-group",{attrs:{label:"Videos"}},[s("b-form-checkbox-group",{attrs:{id:"checkbox",name:"Videos"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.videos,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("b-embed",{attrs:{type:"iframe",aspect:"16by9",src:t.url,allowfullscreen:""}}),s("b-form-checkbox",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1)],1)},xs=[],ws=s("1543"),Is={data:function(){return{image:[],imageId:null,video:[],videoId:null,newUpload:null,userPrompt:null,input:null,selected:[],videoChoice:!1,imageChoice:!1}},methods:{addVideo:function(t,e){ws.galleryCollection.add({createdOn:new Date,url:t.url,name:t.name,videoId:e}).catch((function(t){}))},addImage:function(t,e){ws.galleryCollection.add({createdOn:new Date,url:t.url,name:t.name,imageId:e}).catch((function(t){}))},removeContent:function(t){ws.galleryCollection.doc(t.id).delete()},addNew:function(t){"image"==t.target.value?(this.newUpload=!0,this.input="image"):"video"==t.target.value&&(this.newUpload=!0,this.input="video")},checkFile:function(t){var e=this,s=t.target.files[0],i=!1;"image"==this.input?ws.imageUrlCollection.where("name","==",s.name).get().then((function(t){t.forEach((function(t){if(t.exists)return i=!0,e.image=t.data().url,e.imageId=t.id,e.userPrompt=!0,void e.$store.commit("images/setImageUrl",t.data().url)}))})).then((function(){i||e.$store.dispatch("images/uploadImage",s)})):"video"==this.input&&ws.videosCollection.where("name","==",s.name).get().then((function(t){t.forEach((function(t){if(t.exists)return i=!0,e.video=t.data().url,e.videoId=t.id,e.userPrompt=!0,void e.$store.commit("videos/setVideoUrl",t.data().url)}))})).then((function(){i||e.$store.dispatch("videos/uploadVideo",s)}))},decline:function(){"image"==this.input?(this.userPrompt=!1,this.$store.commit("images/setImageUrl",null),this.imageId=null,this.$refs.imageInput.value="",this.image=null,this.input):"video"==this.input&&(this.userPrompt=!1,this.videoId=null,this.$refs.videoInput.value="",this.input,this.video=null,this.$store.commit("videos/setVideoUrl",null))},confirm:function(){"image"==this.input?(this.addImage(this.image,this.imageId),this.userPrompt=!1,this.$refs.imageInput.value="",this.newUpload=!1,this.$store.commit("images/setImageUrl",null),this.input=""):"video"==this.input&&(this.addVideo(this.video,this.videoId),this.userPrompt=!1,this.$refs.videoInput.value="",this.newUpload=!1,this.$store.commit("videos/setVideoUrl",null),this.input="")},close:function(){var t=this;if("image"==this.input){this.newUpload=!1,this.$refs.imageInput.value="";var e=this.$store.getters["images/getImageUrl"];ws.imageUrlCollection.where("url","==",e).get().then((function(e){e.forEach((function(e){var s=e.data(),i=e.id;t.addImage(s,i)}))})).then((function(){t.$store.commit("images/setImageUrl",null),t.input=""}))}else if("video"==this.input){this.newUpload=!1,this.$refs.imageInput.value="";var s=this.$store.getters["videos/getVideoUrl"];ws.videosCollection.where("url","==",s).get().then((function(e){e.forEach((function(e){var s=e.data(),i=e.id;t.addVideo(s,i)}))})).then((function(){t.$store.commit("videos/getVideoUrl",null),t.input=""}))}},chooseContent:function(t){"image"==t.target.value?this.imageChoice=!0:"video"==t.target.value&&(this.videoChoice=!0)},confirmSelection:function(){var t=this;if(this.imageChoice)for(var e=0;e<this.selected.length;e++)ws.imageUrlCollection.doc(this.selected[e]).get().then((function(e){var s=e.data();s.id=e.id,t.addImage(s,s.id)})).then((function(){t.imageChoice=!1}));else if(this.videoChoice)for(var s=0;s<this.selected.length;s++)ws.videosCollection.doc(this.selected[s]).get().then((function(e){var s=e.data();s.id=e.id,t.addVideo(s,s.id)})).then((function(){t.videoChoice=!1}))},closeSel:function(){this.imageChoice?(this.selected=[],this.imageChoice=!1):this.videoChoice&&(this.videoChoice=!1,this.selected=[])}},computed:{galleryContent:function(){return this.$store.getters["gallery/getGallery"]},imageUrl:function(){return this.$store.getters["images/getImageUrl"]},videoUrl:function(){return this.$store.getters["video/getVideoUrl"]},imageRequest:function(){return this.$store.getters["images/getRequest"]},videoRequest:function(){return this.$store.getters["videos/getRequest"]},imageConfirm:function(){return this.$store.getters["images/confirmation"]},videoConfirm:function(){return this.$store.getters["videos/confirmation"]},images:function(){return this.$store.getters["images/getImages"]},videos:function(){return this.$store.getters["videos/getAllVideos"]}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()}},created:function(){this.$store.dispatch("gallery/setGallery"),this.$store.dispatch("images/setImages"),this.$store.dispatch("videos/setAllVideos")}},$s=Is,Ds=Object(p["a"])($s,ys,xs,!1,null,null,null),Us=Ds.exports,Ps=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Logos")]),s("hr",{staticClass:"balfe-line"}),t.logos.length>0?s("div",[s("div",{staticClass:"row"},t._l(t.logos,(function(e,i){return s("div",{key:i,staticClass:"col-6 col-md-4 col-lg-2"},[s("img",{staticClass:"img-fluid",attrs:{src:e.url}}),s("p",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),s("div",{staticClass:"d-block"},[s("p",{staticClass:"d-inline"},[t._v("Uploaded: "+t._s(t._f("formatCreation")(e.createdOn)))]),s("div",{staticClass:"d-inline pl-2 text-primary",on:{click:function(s){return t.deleteLogo(e)}}},[t._v("Delete")])])])})),0)]):s("div",[t._v("Sorry no logos yet .......... Add some!")]),s("b-modal",{attrs:{"hide-footer":"","hide-header":"",centered:""},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[s("div",{staticClass:"d-block text-center"},[s("p",[t._v(" Are you sure you want to delete this logo ? ( be sure to change the partners with this logo ) ")])]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.deleteOnConfirm}},[t._v("Yes, delete")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.deleteOnCancel}},[t._v("No, do not delete it")])],1)])],1)},Ts=[],js=s("1543"),Os={data:function(){return{deleteDialog:!1,editDialog:!1,toDelete:null}},computed:{logos:function(){return this.$store.getters["images/getLogos"]}},methods:{deleteLogo:function(t){this.toDelete=t,this.deleteDialog=!0},deleteOnCancel:function(){this.deleteDialog=!1},deleteOnConfirm:function(){js.logosCollection.doc(this.toDelete.id).delete(),this.deleteDialog=!1}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()},formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")}},created:function(){this.$store.dispatch("images/setLogos")}},Ns=Os,qs=Object(p["a"])(Ns,Ps,Ts,!1,null,null,null),Ss=qs.exports,Es=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Videos")]),s("hr",{staticClass:"balfe-line"}),t.videos.length>0?s("div",[s("div",{staticClass:"row"},t._l(t.videos,(function(e,i){return s("div",{key:i,staticClass:"col-6 col-md-4 col-lg-2"},[s("b-embed",{attrs:{type:"iframe",aspect:"16by9",src:e.url,allowfullscreen:""}}),s("p",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),s("div",{staticClass:"d-block"},[s("p",{staticClass:"d-inline"},[t._v("Uploaded: "+t._s(t._f("formatCreation")(e.createdOn)))]),s("div",{staticClass:"d-inline pl-2 text-primary",on:{click:function(s){return t.deleteVideo(e)}}},[t._v("Delete")])])],1)})),0)]):s("div",[t._v("Sorry no videos yet .......... Add some!")]),s("b-modal",{attrs:{"hide-footer":"","hide-header":"",centered:""},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[s("div",{staticClass:"d-block text-center"},[s("p",[t._v("Are you sure you want to delete this video ?")])]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.deleteOnConfirm}},[t._v("Yes, delete")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.deleteOnCancel}},[t._v("No, do not delete it")])],1)])],1)},Ls=[],Rs=s("1543"),Ms={data:function(){return{deleteDialog:!1,editDialog:!1,toDelete:null}},computed:{videos:function(){return this.$store.getters["videos/getAllVideos"]}},methods:{deleteVideo:function(t){this.toDelete=t,this.deleteDialog=!0},deleteOnCancel:function(){this.deleteDialog=!1},deleteOnConfirm:function(){this.deleteDialog=!1,Rs.videosCollection.doc(this.toDelete.id).delete()}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()},formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")}},created:function(){this.$store.dispatch("videos/setAllVideos")}},As=Ms,Fs=Object(p["a"])(As,Es,Ls,!1,null,null,null),Hs=Fs.exports,zs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Images")]),s("hr",{staticClass:"balfe-line"}),t.images.length>0?s("div",[s("div",{staticClass:"row"},t._l(t.images,(function(e,i){return s("div",{key:i,staticClass:"col-6 col-md-4 col-lg-2"},[s("img",{staticClass:"img-fluid",attrs:{src:e.url}}),s("p",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),s("div",{staticClass:"d-block"},[s("p",{staticClass:"d-inline"},[t._v("Uploaded: "+t._s(t._f("formatCreation")(e.createdOn)))]),s("div",{staticClass:"d-inline pl-2 text-primary",on:{click:function(s){return t.deleteImage(e)}}},[t._v("Delete")])])])})),0)]):s("div",[t._v("Sorry no images yet .......... Add some!")]),s("b-modal",{attrs:{"hide-footer":"","hide-header":"",centered:""},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[s("div",{staticClass:"d-block text-center"},[s("p",[t._v(" Are you sure you want to delete this image ? ( be sure to change the posts with this image ) ")])]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.deleteOnConfirm}},[t._v("Yes, delete")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.deleteOnCancel}},[t._v("No, do not delete it")])],1)])],1)},Gs=[],Ys=s("1543"),Vs={data:function(){return{deleteDialog:!1,editDialog:!1,toDelete:null}},computed:{images:function(){return this.$store.getters["images/getImages"]}},methods:{deleteImage:function(t){this.toDelete=t,this.deleteDialog=!0},deleteOnCancel:function(){this.deleteDialog=!1},deleteOnConfirm:function(){this.deleteDialog=!1,Ys.imageUrlCollection.doc(this.toDelete.id).delete()}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()},formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")}},created:function(){this.$store.dispatch("images/setImages")}},Bs=Vs,Qs=Object(p["a"])(Bs,zs,Gs,!1,null,null,null),Ws=Qs.exports,Ks=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-left"},[s("h1",{staticClass:"text-left"},[t._v("Drivers")]),s("hr",{staticClass:"balfe-line"}),s("b-form",{on:{submit:function(e){return e.preventDefault(),t.submitHandler(e)}}},[s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.driver.image}})]),s("b-button",{staticClass:"btn btn-primary",attrs:{value:"driver"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("div",{staticClass:"col-12 p-0"},[s("div",{staticClass:"row"},[s("b-form-group",{staticClass:"text-left col-12 col-sm-6",attrs:{id:"firstName",label:"First name","label-for":"firstName"}},[s("b-input",{attrs:{id:"firstName",type:"text"},model:{value:t.driver.firstName,callback:function(e){t.$set(t.driver,"firstName","string"===typeof e?e.trim():e)},expression:"driver.firstName"}})],1),s("b-form-group",{staticClass:"text-left col-12 col-sm-6",attrs:{id:"secondName",label:"Second name","label-for":"secondName"}},[s("b-input",{attrs:{id:"secondName",type:"text"},model:{value:t.driver.secondName,callback:function(e){t.$set(t.driver,"secondName","string"===typeof e?e.trim():e)},expression:"driver.secondName"}})],1)],1)]),s("b-form-group",{staticClass:"text-left",attrs:{id:"career",label:"Career","label-for":"career"}},[s("wysiwyg",{attrs:{id:"career"},model:{value:t.driver.career,callback:function(e){t.$set(t.driver,"career",e)},expression:"driver.career"}})],1),s("b-button",{attrs:{type:"submit",disabled:""==t.driver.firstName||""==t.driver.secondName,variant:"primary"}},[t._v("Add driver")])],1),t.driverAdded?s("div",{staticClass:"text-sucsess"},[t._v("Driver has been added!")]):t._e(),s("hr",{staticClass:"balfe-line"}),t.drivers.length>0?s("div",[s("table",{staticClass:"table table-striped table-hover text-left"},[t._m(0),s("tbody",t._l(t.drivers,(function(e,i){return s("tr",{key:i},[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.fullName))]),s("td",[s("img",{staticClass:"img-fluid",attrs:{src:e.image,width:"200px"}})]),s("td",{domProps:{innerHTML:t._s(e.career)}}),s("td",[t._v(t._s(t._f("formatCreation")(e.createdOn)))]),s("td",[s("div",{staticClass:"d-inline px-1 text-dark",on:{click:function(s){return t.editdriver(e)}}},[t._v("Edit")]),s("div",{staticClass:"d-inline px-1 text-primary",on:{click:function(s){return t.deletedriver(e)}}},[t._v("Delete")])])])})),0)])]):s("div",[t._v("Sorry no drivers yet .......... Add some!")]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.newImageUpload,callback:function(e){t.newImageUpload=e},expression:"newImageUpload"}},[s("h5",[t._v("Upload a new image")]),s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[t.imageUrl?s("div",[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]):t._e()]),"driver"==t.input?s("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.close}},[t._v("Close")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e()],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"lg"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[s("div",{staticClass:"d-block text-center"},[s("p",[t._v(" Are you sure you want to delete this driver ? ( there's no turning back ) ")])]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.deleteOnConfirm}},[t._v("Yes, delete")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.deleteOnCancel}},[t._v("No, do not delete it")])],1)]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("div",[t.newImage?t._e():s("img",{staticClass:"img-fluid",attrs:{src:t.currentDriver.image}}),t.newImage?s("img",{staticClass:"img-fluid",attrs:{src:t.driver.image}}):t._e()]),s("b-button",{staticClass:"btn btn-primary",attrs:{value:"driver"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-button",{staticClass:"btn btn-primary ml-2",attrs:{value:"driver"},on:{click:function(e){return t.chooseImage(e)}}},[t._v("+ Select Image")]),s("b-form-group",{staticClass:"text-left",attrs:{id:"firstName",label:"First Name","label-for":"firstName"}},[s("b-input",{attrs:{id:"firstName",type:"text",placeholder:t.currentDriver.firstName},model:{value:t.driver.firstName,callback:function(e){t.$set(t.driver,"firstName","string"===typeof e?e.trim():e)},expression:"driver.firstName"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"secondName",label:"Second Name","label-for":"secondName"}},[s("b-input",{attrs:{id:"secondName",type:"text",placeholder:t.currentDriver.secondName},model:{value:t.driver.secondName,callback:function(e){t.$set(t.driver,"secondName","string"===typeof e?e.trim():e)},expression:"driver.secondName"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"career",label:"Career","label-for":"career"}},[s("wysiwyg",{attrs:{id:"careerription"},model:{value:t.driver.career,callback:function(e){t.$set(t.driver,"career",e)},expression:"driver.career"}},[t._v(" "+t._s(t.currentDriver.career)+" ")])],1)],1),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.editOnConfirm}},[t._v("Edit")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.editOnCancel}},[t._v("Cancel")])],1)],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.userPrompt,callback:function(e){t.userPrompt=e},expression:"userPrompt"}},[s("h5",[t._v("Duplicate image")]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]),s("p",[t._v("Duplicate image would you like to use this image ?")]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.confirm}},[t._v("Yes")]),s("b-button",{staticClass:"mr-2",on:{click:t.decline}},[t._v("No")])],1)]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.imageChoice,callback:function(e){t.imageChoice=e},expression:"imageChoice"}},[s("b-form-group",{attrs:{label:"Drivers"}},[s("b-form-radio-group",{attrs:{id:"radio",name:"Drivers"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.images,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}}),s("b-form-radio",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1)],1)},Js=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Name")]),s("th",{attrs:{scope:"col"}},[t._v("Image")]),s("th",{attrs:{scope:"col"}},[t._v("Career")]),s("th",{attrs:{scope:"col"}},[t._v("Updated")]),s("th",{attrs:{scope:"col"}},[t._v("Action")])])])}],Xs=s("1543"),Zs={data:function(){return{driver:{image:"",imageId:"",firstName:"",secondName:"",career:""},driverAdded:null,newImage:!1,newImageUpload:!1,imageId:null,userPrompt:!1,deleteDialog:!1,editDialog:!1,currentDriver:{},toDelete:null,toEdit:null,select:null,imageChoice:null,input:null}},computed:{drivers:function(){return this.$store.getters["drivers/getDrivers"]},confirmation:function(){return this.$store.getters["images/confirmation"]},imageUrl:function(){return this.$store.getters["images/getDriverUrl"]},images:function(){return this.$store.getters["images/getDrivers"]},request:function(){return this.$store.getters["images/getRequest"]}},methods:{createDriver:function(){var t=this;this.$store.commit("images/setRequest",!0),Xs.driversCollection.add({createdOn:new Date,image:this.driver.image,imageId:this.driver.imageId,fullName:this.driver.firstName+" "+this.driver.secondName,firstName:this.driver.firstName,secondName:this.driver.secondName,career:this.driver.career}).then((function(){t.driverAdded=!0,t.$refs.fileInput="",t.driver.fullName="",t.driver.image="",t.driver.firstName="",t.driver.secondName="",t.driver.imageId="",t.driver.career="",t.imageId=null,t.$store.commit("images/setRequest",!1),t.$store.commit("images/setDriverUrl",null),setInterval((function(){t.driverAdded=null}),3e3)})).catch((function(t){return t.message}))},submitHandler:function(){this.createDriver()},deletedriver:function(t){this.toDelete=t,this.deleteDialog=!0},deleteOnCancel:function(){this.deleteDialog=!1},deleteOnConfirm:function(){this.deleteDialog=!1,Xs.driversCollection.doc(this.toDelete.id).delete()},editdriver:function(t){this.toEdit=t,this.currentDriver=t,this.editDialog=!0,this.driver.image=this.currentDriver.image,this.driver.firstName=this.currentDriver.firstName,this.driver.secondName=this.currentDriver.secondName,this.driver.career=this.currentDriver.career,this.driver.imageId=this.currentDriver.imageId},editOnCancel:function(){this.editDialog=!1,this.currentDriver={},this.driver.image="",this.driver.fullName="",this.driver.image="",this.driver.firstName="",this.driver.secondName="",this.driver.imageId="",this.driver.career=""},editOnConfirm:function(){var t=this;this.editDialog=!1;var e=this.driver.image,s=this.driver.secondName,i=this.driver.firstName,a=this.driver.career,r=this.driver.firstName+" "+this.driver.secondName,o=this.driver.imageId;Xs.driversCollection.doc(this.toEdit.id).update({createdOn:new Date,image:e,imageId:o,secondName:s,firstName:i,fullName:r,career:a}).then((function(){t.currentDriver={},t.newImage=!1,t.imageId="",t.driver.image="",t.driver.imageId="",t.driver.fullName="",t.driver.firstName="",t.driver.secondName="",t.driver.career=""})).catch((function(t){return alert(t.message)}))},addNewImage:function(t){"driver"==t.target.value&&(this.newImageUpload=!0,this.input="driver")},checkFile:function(t){var e=this,s=t.target.files[0],i=!1;Xs.driversImagesCollection.where("name","==",s.name).get().then((function(t){t.forEach((function(t){if(t.exists)return i=!0,void("driver"==e.input&&(e.driver.image=t.data().url,e.newImage=!0,e.imageId=t.id,e.userPrompt=!0,e.$store.commit("images/setDriverUrl",t.data().url)))}))})).then((function(){i||e.$store.dispatch("images/uploadDriverImage",s)}))},decline:function(){"driver"==this.input&&(this.userPrompt=!1,this.$store.commit("images/setDriverUrl",null),this.imageId=null,this.$refs.fileInput.value="",this.driver.image=null,this.input,this.newImage=!1)},confirm:function(){"driver"==this.input&&(this.driver.image=this.$store.getters["images/getDriverUrl"],this.driver.imageId=this.imageId,this.userPrompt=!1,this.$refs.fileInput.value="",this.newImageUpload=!1,this.$store.commit("images/setDriverUrl",null),this.newImage=!0,this.input="")},close:function(){var t=this;if("driver"==this.input){var e=this.$store.getters["images/getDriverUrl"];this.driver.image=e,this.newImageUpload=!1,Xs.driversImagesCollection.where("url","==",e).get().then((function(e){e.forEach((function(e){t.driver.imageId=e.id}))})),this.$refs.fileInput.value="",this.$store.commit("images/setDriverUrl",null),this.input=""}},chooseImage:function(t){"driver"==t.target.value&&(this.imageChoice=!0,this.select=this.currentDriver.imageId)},confirmSelection:function(){var t=this;this.imageChoice&&Xs.driversImagesCollection.doc(this.select).get().then((function(e){var s=e.data();t.newImage=!0,t.driver.image=s.url,t.driver.imageId=e.id})).then((function(){t.imageChoice=!1,t.select=null}))},closeSel:function(){this.imageChoice&&(this.imageChoice=!1,this.select=null)}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()},formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")}},created:function(){this.$store.dispatch("drivers/setDrivers"),this.$store.dispatch("images/setDriverImages")}},ti=Zs,ei=(s("7f9e"),Object(p["a"])(ti,Ks,Js,!1,null,"93d26bc2",null)),si=ei.exports,ii=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("h2",[t._v("Add round")]),s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("b-form-select",{staticClass:"mt-3",attrs:{options:t.trackOptions,size:"sm"},on:{change:t.selectOption},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Select the track --")])]},proxy:!0}]),model:{value:t.selectTrack.selected,callback:function(e){t.$set(t.selectTrack,"selected",e)},expression:"selectTrack.selected"}}),s("b-form-group",{staticClass:"text-left",attrs:{id:"number",label:"Round","label-for":"number"}},[s("b-input",{attrs:{id:"number",type:"text"},model:{value:t.round.number,callback:function(e){t.$set(t.round,"number","string"===typeof e?e.trim():e)},expression:"round.number"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"date",label:"Date","label-for":"date"}},[s("datepicker",{attrs:{id:"date",type:"text"},model:{value:t.round.date,callback:function(e){t.$set(t.round,"date",e)},expression:"round.date"}})],1),s("b-button",{attrs:{type:"submit",disabled:null==t.selectTrack.selected||""==t.round.date,variant:"primary"},on:{click:t.createRound}},[t._v("Add Round")])],1)],1),s("div",{staticClass:"col-6"},[s("h2",{staticClass:"pb-3"},[t._v("Manage tracks")]),s("b-button",{staticClass:"btn btn-primary",on:{click:t.createTrack}},[t._v("+ New track")]),s("b-form-select",{staticClass:"mt-4",attrs:{options:t.trackOptions,size:"sm"},on:{change:t.viewOption},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Select the track --")])]},proxy:!0}]),model:{value:t.viewTrack.selected,callback:function(e){t.$set(t.viewTrack,"selected",e)},expression:"viewTrack.selected"}}),t.trackView?s("table",{staticClass:"table table-striped table-hover text-left"},[t._m(0),s("tbody",[s("tr",[s("td",[t._v(t._s(t.viewTrack.track.name))]),s("td",[t._v(t._s(t.viewTrack.track.corners))]),s("td",[t._v(t._s(t.viewTrack.track.length)+" miles")]),s("td",[t._v(t._s(t._f("formatCreation")(t.viewTrack.track.createdOn)))]),s("td",[s("div",{staticClass:"d-inline px-1 text-dark",on:{click:function(e){return t.editTrack(t.viewTrack.track)}}},[t._v("Edit")]),s("div",{staticClass:"d-inline px-1 text-primary",on:{click:function(e){return t.deleteTrack(t.viewTrack.track)}}},[t._v("Delete")])])])])]):s("div",[t._v("Select a track to view or edit")]),"track"==t.conf?s("div",{staticClass:"text-success"},[t._v("Track has been edited")]):t._e()],1)]),s("hr",{staticClass:"balfe-line"}),"rounds"==t.conf?s("div",{staticClass:"text-success"},[t._v("Round edited")]):t._e(),t.calender.length>0?s("div",[s("table",{staticClass:"table table-striped table-hover text-left"},[t._m(1),s("tbody",t._l(t.calender,(function(e,i){return s("tr",{key:i},[s("td",{attrs:{scope:"row"}},[t._v(t._s(e.number))]),s("td",[t._v(t._s(t._f("formatDate")(e.date)))]),s("td",[t._v(t._s(e.trackName))]),s("td",[t._v(t._s(t._f("formatCreation")(e.createdOn)))]),s("td",[s("div",{staticClass:"d-inline px-1 text-dark",on:{click:function(s){return t.editRound(e)}}},[t._v("Edit")]),s("div",{staticClass:"d-inline px-1 text-primary",on:{click:function(s){return t.deleteRound(e)}}},[t._v("Delete")])])])})),0)])]):s("div",[t._v("Sorry no fixtures yet .......... Add some!")]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.addTrackDialog,callback:function(e){t.addTrackDialog=e},expression:"addTrackDialog"}},[s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",[s("img",{staticClass:"img-fluid",attrs:{src:t.track.image}})]),s("b-button",{staticClass:"btn btn-primary",attrs:{value:"track"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-button",{staticClass:"btn btn-primary ml-2",attrs:{value:"track"},on:{click:function(e){return t.chooseImage(e)}}},[t._v("+ Select Image")]),s("b-form-group",{staticClass:"text-left",attrs:{id:"name",label:"Name","label-for":"name"}},[s("b-input",{attrs:{id:"name",type:"text"},model:{value:t.track.name,callback:function(e){t.$set(t.track,"name","string"===typeof e?e.trim():e)},expression:"track.name"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"corners",label:"Corners","label-for":"corners"}},[s("b-input",{attrs:{id:"corners",type:"number"},model:{value:t.track.corners,callback:function(e){t.$set(t.track,"corners","string"===typeof e?e.trim():e)},expression:"track.corners"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"length",label:"Length (miles)","label-for":"length"}},[s("b-input",{attrs:{id:"length",type:"text"},model:{value:t.track.length,callback:function(e){t.$set(t.track,"length","string"===typeof e?e.trim():e)},expression:"track.length"}})],1),s("h5",{staticClass:"pt-5"},[t._v("Last year results")]),s("div",{staticClass:"row"},[s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"GT3_one",label:"Car #22, 720S GT3 race one","label-for":"GT3_one"}},[s("b-input",{attrs:{id:"GT3_one",type:"text"},model:{value:t.track.gt3_one,callback:function(e){t.$set(t.track,"gt3_one","string"===typeof e?e.trim():e)},expression:"track.gt3_one"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"GT4_one",label:"Car #20 570S GT4 race one","label-for":"GT4_one"}},[s("b-input",{attrs:{id:"GT4_one",type:"text"},model:{value:t.track.gt4_one,callback:function(e){t.$set(t.track,"gt4_one","string"===typeof e?e.trim():e)},expression:"track.gt4_one"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"GT3_two",label:"Car #22, 720S GT3 race two","label-for":"GT3_two"}},[s("b-input",{attrs:{id:"GT3_two",type:"text"},model:{value:t.track.gt3_two,callback:function(e){t.$set(t.track,"gt3_two","string"===typeof e?e.trim():e)},expression:"track.gt3_two"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"GT4_two",label:"Car #20 570S GT4 race two","label-for":"GT4_two"}},[s("b-input",{attrs:{id:"GT4_two",type:"text"},model:{value:t.track.gt4_two,callback:function(e){t.$set(t.track,"gt4_two","string"===typeof e?e.trim():e)},expression:"track.gt4_two"}})],1)],1),s("h5",{staticClass:"pt-5"},[t._v("Current timetable")]),s("div",{staticClass:"row"},[s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"fp_one",label:"Free practice one","label-for":"fp_one"}},[s("b-input",{attrs:{id:"fp_one",type:"text"},model:{value:t.track.fp_one,callback:function(e){t.$set(t.track,"fp_one","string"===typeof e?e.trim():e)},expression:"track.fp_one"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"fp_two",label:"Free practice two","label-for":"fp_two"}},[s("b-input",{attrs:{id:"fp_two",type:"text"},model:{value:t.track.fp_two,callback:function(e){t.$set(t.track,"fp_two","string"===typeof e?e.trim():e)},expression:"track.fp_two"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"race_one",label:"Race one","label-for":"race_one"}},[s("b-input",{attrs:{id:"race_one",type:"text"},model:{value:t.track.race_one,callback:function(e){t.$set(t.track,"race_one","string"===typeof e?e.trim():e)},expression:"track.race_one"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"race_two",label:"Race two","label-for":"race_two"}},[s("b-input",{attrs:{id:"race_two",type:"text"},model:{value:t.track.race_two,callback:function(e){t.$set(t.track,"race_two","string"===typeof e?e.trim():e)},expression:"track.race_two"}})],1)],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"qualifying",label:"Qualifying","label-for":"qualifying"}},[s("b-input",{attrs:{id:"qualifying",type:"text"},model:{value:t.track.qualifying,callback:function(e){t.$set(t.track,"qualifying","string"===typeof e?e.trim():e)},expression:"track.qualifying"}})],1)],1),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.newTrackOnConfirm}},[t._v("Add")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.newTrackOnCancel}},[t._v("Cancel")])],1)],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.editTrackDialog,callback:function(e){t.editTrackDialog=e},expression:"editTrackDialog"}},[s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"row"},[t.newImage?t._e():s("img",{staticClass:"img-fluid mx-auto",attrs:{src:t.currentTrack.image}}),t.newImage?s("img",{staticClass:"img-fluid mx-auto",attrs:{src:t.track.image}}):t._e()]),s("b-button",{staticClass:"btn btn-primary",attrs:{value:"track"},on:{click:function(e){return t.addNewImage(e)}}},[t._v("+ Image")]),s("b-button",{staticClass:"btn btn-primary ml-2",attrs:{value:"track"},on:{click:function(e){return t.chooseImage(e)}}},[t._v("Select Image")]),s("b-form-group",{staticClass:"text-left",attrs:{id:"name",label:"Name","label-for":"name"}},[s("b-input",{attrs:{id:"name",type:"text"},model:{value:t.currentTrack.name,callback:function(e){t.$set(t.currentTrack,"name","string"===typeof e?e.trim():e)},expression:"currentTrack.name"}})],1),s("div",{staticClass:"row"},[s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"corners",label:"Corners","label-for":"corners"}},[s("b-input",{attrs:{id:"corners",type:"number"},model:{value:t.currentTrack.corners,callback:function(e){t.$set(t.currentTrack,"corners","string"===typeof e?e.trim():e)},expression:"currentTrack.corners"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"length",label:"Length (m)","label-for":"length"}},[s("b-input",{attrs:{id:"length",type:"text"},model:{value:t.currentTrack.length,callback:function(e){t.$set(t.currentTrack,"length","string"===typeof e?e.trim():e)},expression:"currentTrack.length"}})],1)],1),s("h5",{staticClass:"pt-5"},[t._v("Last year results")]),s("div",{staticClass:"row"},[s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"GT3_one",label:"GT3 race one","label-for":"GT3_one"}},[s("b-input",{attrs:{id:"GT3_one",type:"text"},model:{value:t.currentTrack.gt3_one,callback:function(e){t.$set(t.currentTrack,"gt3_one","string"===typeof e?e.trim():e)},expression:"currentTrack.gt3_one"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"GT4_one",label:"GT4 race one","label-for":"GT4_one"}},[s("b-input",{attrs:{id:"GT4_one",type:"text"},model:{value:t.currentTrack.gt4_one,callback:function(e){t.$set(t.currentTrack,"gt4_one","string"===typeof e?e.trim():e)},expression:"currentTrack.gt4_one"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"GT3_two",label:"GT3 race two","label-for":"GT3_two"}},[s("b-input",{attrs:{id:"GT3_two",type:"text"},model:{value:t.currentTrack.gt3_two,callback:function(e){t.$set(t.currentTrack,"gt3_two","string"===typeof e?e.trim():e)},expression:"currentTrack.gt3_two"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"GT4_two",label:"GT4 race two","label-for":"GT4_two"}},[s("b-input",{attrs:{id:"GT4_two",type:"text"},model:{value:t.currentTrack.gt4_two,callback:function(e){t.$set(t.currentTrack,"gt4_two","string"===typeof e?e.trim():e)},expression:"currentTrack.gt4_two"}})],1)],1),s("h5",{staticClass:"pt-5"},[t._v("Current timetable")]),s("div",{staticClass:"row"},[s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"fp_one",label:"Free practice one","label-for":"fp_one"}},[s("b-input",{attrs:{id:"fp_one",type:"text"},model:{value:t.currentTrack.fp_one,callback:function(e){t.$set(t.currentTrack,"fp_one","string"===typeof e?e.trim():e)},expression:"currentTrack.fp_one"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"fp_two",label:"Free practice two","label-for":"fp_two"}},[s("b-input",{attrs:{id:"fp_two",type:"text"},model:{value:t.currentTrack.fp_two,callback:function(e){t.$set(t.currentTrack,"fp_two","string"===typeof e?e.trim():e)},expression:"currentTrack.fp_two"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"race_one",label:"Race one","label-for":"race_one"}},[s("b-input",{attrs:{id:"race_one",type:"text"},model:{value:t.currentTrack.race_one,callback:function(e){t.$set(t.currentTrack,"race_one","string"===typeof e?e.trim():e)},expression:"currentTrack.race_one"}})],1),s("b-form-group",{staticClass:"text-left col-6",attrs:{id:"race_two",label:"Race two","label-for":"race_two"}},[s("b-input",{attrs:{id:"race_two",type:"text"},model:{value:t.currentTrack.race_two,callback:function(e){t.$set(t.currentTrack,"race_two","string"===typeof e?e.trim():e)},expression:"currentTrack.race_two"}})],1)],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"qualifying",label:"Qualifying","label-for":"qualifying"}},[s("b-input",{attrs:{id:"qualifying",type:"text"},model:{value:t.currentTrack.qualifying,callback:function(e){t.$set(t.currentTrack,"qualifying","string"===typeof e?e.trim():e)},expression:"currentTrack.qualifying"}})],1)],1),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.editTrackOnConfirm}},[t._v("Edit")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.editTrackOnCancel}},[t._v("Cancel")])],1)],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[s("b-form-select",{staticClass:"mt-3",attrs:{options:t.trackOptions,size:"sm"},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Select the track --")])]},proxy:!0}]),model:{value:t.selectTrack.selected,callback:function(e){t.$set(t.selectTrack,"selected",e)},expression:"selectTrack.selected"}}),s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("b-form-group",{staticClass:"text-left",attrs:{id:"date",label:"Date","label-for":"date"}},[s("span",[t._v("Current date: "+t._s(t._f("formatDate")(t.currentRound.date)))]),s("datepicker",{attrs:{id:"date",type:"date"},model:{value:t.editForm.date,callback:function(e){t.$set(t.editForm,"date",e)},expression:"editForm.date"}})],1),s("b-form-group",{staticClass:"text-left",attrs:{id:"number",label:"Rounds","label-for":"number"}},[s("b-input",{attrs:{id:"number",type:"text"},model:{value:t.editForm.number,callback:function(e){t.$set(t.editForm,"number","string"===typeof e?e.trim():e)},expression:"editForm.number"}})],1)],1),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.editOnConfirm}},[t._v("Edit")]),s("b-button",{attrs:{variant:"primary"},on:{click:t.editOnCancel}},[t._v("Cancel")])],1)],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.newImageUpload,callback:function(e){t.newImageUpload=e},expression:"newImageUpload"}},[s("h5",[t._v("Upload a new image")]),s("transition",{attrs:{name:"fade"}},[t.request?s("div",{staticClass:"loading"},[s("p",{staticClass:"text-dark"},[t._v("Loading...")])]):t._e()]),s("div",{staticClass:"container"},[t.imageUrl?s("div",[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]):t._e()]),"track"==t.input?s("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*"},on:{change:t.checkFile}}):t._e(),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.close}},[t._v("Close")])],1),t.confirmation?s("p",{staticClass:"text-success"},[t._v("Image uploaded !")]):t._e()],1),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.userPrompt,callback:function(e){t.userPrompt=e},expression:"userPrompt"}},[s("h5",[t._v("Duplicate image")]),s("div",{staticClass:"container"},[s("img",{staticClass:"img-fluid",attrs:{src:t.imageUrl}})]),s("p",[t._v("Duplicate image would you like to use this image ?")]),s("div",{staticClass:"d-block text-right pt-3"},[s("b-button",{staticClass:"mr-2",on:{click:t.confirm}},[t._v("Yes")]),s("b-button",{staticClass:"mr-2",on:{click:t.decline}},[t._v("No")])],1)]),s("b-modal",{attrs:{"hide-header":"","hide-footer":"",centered:"","no-close-on-backdrop":"","hide-header-close":"","no-close-on-esc":"",size:"xl"},model:{value:t.imageChoice,callback:function(e){t.imageChoice=e},expression:"imageChoice"}},[s("b-form-group",{attrs:{label:"Circuits"}},[s("b-form-radio-group",{attrs:{id:"radio",name:"Circuits"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},t._l(t.images,(function(t,e){return s("div",{key:e,staticClass:"col-4"},[s("img",{staticClass:"img-fluid",attrs:{src:t.url}}),s("b-form-radio",{staticClass:"mx-auto",attrs:{value:t.id}})],1)})),0)])])],1),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.confirmSelection}},[t._v("Confirm")]),s("b-button",{staticClass:"mr-2 text-left",on:{click:t.closeSel}},[t._v("Close")])],1)],1)},ai=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Name")]),s("th",{attrs:{scope:"col"}},[t._v("Coners")]),s("th",{attrs:{scope:"col"}},[t._v("Length (miles)")]),s("th",{attrs:{scope:"col"}},[t._v("Updated")]),s("th",{attrs:{scope:"col"}},[t._v("Action")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Rounds")]),s("th",{attrs:{scope:"col"}},[t._v("Date")]),s("th",{attrs:{scope:"col"}},[t._v("Track")]),s("th",{attrs:{scope:"col"}},[t._v("Updated")]),s("th",{attrs:{scope:"col"}},[t._v("Action")])])])}],ri=s("1543"),oi={data:function(){return{round:{date:"",number:""},trackId:null,newImageUpload:null,roundToEdit:null,trackToEdit:null,editDialog:!1,editTrackDialog:!1,addTrackDialog:!1,selectTrack:{selected:null,track:null},viewTrack:{selected:null,track:null},currentRound:{date:null},editForm:{trackId:null,date:"",number:""},currentTrack:{},track:{},trackView:null,input:null,userPrompt:null,select:null,imageChoice:null,newImage:null,conf:""}},computed:{tracks:function(){return this.$store.getters["calender/getAllTracks"]},calender:function(){return this.$store.getters["calender/getAllRounds"]},trackOptions:function(){return this.$store.getters["calender/getTrackOptions"]},request:function(){return this.$store.getters["images/getRequest"]},confirmation:function(){return this.$store.getters["images/confirmation"]},imageUrl:function(){return this.$store.getters["images/getTrackUrl"]},images:function(){return this.$store.getters["images/getTrackImages"]}},methods:{createRound:function(){var t=this;ri.calenderRounds.add({number:this.round.number,date:this.round.date,trackId:this.trackId,trackName:this.trackName,createdOn:new Date,image:this.trackImage}).then((function(){t.trackId=null,t.round.date="",t.round.number="",t.trackName=null,t.trackImage="",t.selectTrack.selected=null})).catch((function(t){return alert(t.message)}))},selectOption:function(t){var e=this;ri.tracksCollection.doc(t).get().then((function(t){e.trackId=t.id,e.trackName=t.data().name,e.trackImage=t.data().image})).catch((function(t){return alert(t.message)}))},editRound:function(t){this.roundToEdit=t,this.currentRound=t,this.editDialog=!0,this.editForm.number=t.number,this.selectTrack.selected=t.trackId},editOnConfirm:function(){var t=this;ri.tracksCollection.doc(this.selectTrack.selected).get().then((function(e){t.trackName=e.data().name,t.trackImage=e.data().image})).then((function(){ri.calenderRounds.doc(t.roundToEdit.id).update({trackId:t.selectTrack.selected,date:t.editForm.date,number:t.editForm.number,createdOn:new Date,trackName:t.trackName,image:t.trackImage}).then((function(){t.editForm.date="",t.editForm.number="",t.selectTrack.selected=null,t.editDialog=!1,t.editConf("rounds"),t.trackName="",t.trackImage=""})).catch((function(t){alert(t.message)}))}))},editOnCancel:function(){this.roundToEdit=null,this.editDialog=!1,this.editForm.date="",this.editForm.number="",this.selectTrack.selected=null},deleteRound:function(t){ri.calenderRounds.doc(t.id).delete()},viewOption:function(t){var e=this;ri.tracksCollection.doc(t).get().then((function(t){e.viewTrack.track=t.data(),e.viewTrack.track.id=t.id,e.trackView=!0})).catch((function(t){return alert(t.message)}))},createTrack:function(){this.addTrackDialog=!0},newTrackOnConfirm:function(){var t=this;ri.tracksCollection.add({name:this.track.name,corners:this.track.corners,length:this.track.length,createdOn:new Date,image:this.track.image,imageId:this.track.imageId,gt3_one:this.track.gt3_one,gt4_one:this.track.gt4_one,gt3_two:this.track.gt3_two,gt4_two:this.track.gt4_two,fp_one:this.track.fp_one,fp_two:this.track.fp_two,qualifying:this.track.qualifying,race_one:this.track.race_one,race_two:this.track.race_two}).then((function(){t.addTrackDialog=!1,t.track={},t.imageId=null})).catch((function(t){alert(t.message)}))},newTrackOnCancel:function(){this.track={},this.addTrackDialog=!1,this.imageId=null},editTrack:function(t){this.trackToEdit=t,this.currentTrack=t,this.track=this.currentTrack,this.editTrackDialog=!0,this.viewTrack.selected=t.id},editTrackOnConfirm:function(){var t=this;ri.tracksCollection.doc(this.trackToEdit.id).update({name:this.track.name,corners:this.track.corners,length:this.track.length,createdOn:new Date,image:this.track.image,imageId:this.track.imageId,gt3_one:this.track.gt3_one,gt4_one:this.track.gt4_one,gt3_two:this.track.gt3_two,gt4_two:this.track.gt4_two,fp_one:this.track.fp_one,fp_two:this.track.fp_two,qualifying:this.track.qualifying,race_one:this.track.race_one,race_two:this.track.race_two}).then((function(){t.currentTrack={},t.editTrackDialog=!1,t.viewTrack.selected=null,t.trackToEdit=null,t.trackView=null,t.imageId=null,t.track={},t.editConf("track")})).catch((function(t){alert(t.message)}))},editTrackOnCancel:function(){this.trackToEdit=null,this.currentTrack={},this.editTrackDialog=!1,this.trackView=null,this.viewTrack.selected=null,this.imageId=null},deleteTrack:function(t){ri.tracksCollection.doc(t.id).delete()},editConf:function(t){var e=this;this.conf=t,setTimeout((function(){t="",e.conf=""}),3e3)},addNewImage:function(t){"track"==t.target.value&&(this.newImageUpload=!0,this.input="track")},checkFile:function(t){var e=this,s=t.target.files[0],i=!1;ri.tracksImagesCollection.where("name","==",s.name).get().then((function(t){t.forEach((function(t){if(t.exists)return i=!0,void("track"==e.input&&(e.track.image=t.data().url,e.newImage=!0,e.imageId=t.id,e.userPrompt=!0,e.$store.commit("images/setTrackUrl",t.data().url)))}))})).then((function(){i||e.$store.dispatch("images/uploadTrackImage",s)}))},decline:function(){"track"==this.input&&(this.userPrompt=!1,this.$store.commit("images/setTrackUrl",null),this.imageId=null,this.$refs.fileInput.value="",this.track.image=null,this.input,this.newImage=!1)},confirm:function(){"track"==this.input&&(this.track.image=this.$store.getters["images/getTrackUrl"],this.track.imageId=this.imageId,this.userPrompt=!1,this.$refs.fileInput.value="",this.newImageUpload=!1,this.$store.commit("images/setTrackUrl",null),this.newImage=!0,this.input="")},close:function(){var t=this;if("track"==this.input){var e=this.$store.getters["images/getTrackUrl"];this.track.image=e,this.newImageUpload=!1,ri.tracksImagesCollection.where("url","==",e).get().then((function(e){e.forEach((function(e){t.track.imageId=e.id}))})),this.$refs.fileInput.value="",this.$store.commit("images/setTrackUrl",null),this.input=""}},chooseImage:function(t){"track"==t.target.value&&(this.imageChoice=!0,this.select=this.currentTrack.imageId)},confirmSelection:function(){var t=this;this.imageChoice&&ri.tracksImagesCollection.doc(this.select).get().then((function(e){var s=e.data();t.newImage=!0,t.track.image=s.url,t.track.imageId=e.id})).then((function(){t.imageChoice=!1,t.select=null}))},closeSel:function(){this.imageChoice&&(this.imageChoice=!1,this.select=null)}},filters:{formatCreation:function(t){if(!t)return"-";var e=t.toDate();return E()(e).fromNow()},formatDate:function(t){if(!t)return"-";var e=t.toDate();return E()(e).format("MMMM Do YYYY")}},created:function(){this.$store.dispatch("calender/setAllTracks"),this.$store.dispatch("calender/setAllRounds"),this.$store.dispatch("images/setTrackImages")}},ni=oi,li=Object(p["a"])(ni,ii,ai,!1,null,null,null),ci=li.exports,di=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-left"},[t._v("Settings")]),s("hr",{staticClass:"balfe-line"}),s("p",[t._v("Update your profile")]),s("transition",{attrs:{name:"fade"}},[t.showSuccess?s("p",{staticClass:"text-success"},[t._v("Profile updated")]):t._e()]),s("b-form",{on:{submit:function(t){t.preventDefault()}}},[s("b-form-group",{attrs:{id:"name",label:"Name: ","label-for":"name"}},[s("b-input",{attrs:{type:"text",id:"name",required:"",placeholder:"Enter name"},model:{value:t.userProfile.name,callback:function(e){t.$set(t.userProfile,"name","string"===typeof e?e.trim():e)},expression:"userProfile.name"}})],1),s("b-form-group",{attrs:{id:"title",label:"Title: ","label-for":"title"}},[s("b-input",{attrs:{type:"text",id:"title",required:"",placeholder:"Enter title"},model:{value:t.userProfile.title,callback:function(e){t.$set(t.userProfile,"title","string"===typeof e?e.trim():e)},expression:"userProfile.title"}})],1),s("b-button",{attrs:{varient:"secondary"},on:{click:t.updateProfile}},[t._v("Update Profile")])],1)],1)},ui=[],mi={data:function(){return{name:"",title:"",showSuccess:!1}},computed:{userProfile:function(){return this.$store.getters["admin/getUserProfile"]}},methods:{updateProfile:function(){var t=this;this.$store.dispatch("updateProfile",{name:""!==this.name?this.name:this.userProfile.name,title:""!==this.title?this.title:this.userProfile.title}),this.name="",this.title="",this.showSuccess=!0,setTimeout((function(){t.showSuccess=!1}),3e3)}}},gi=mi,fi=Object(p["a"])(gi,di,ui,!1,null,null,null),hi=fi.exports;i["default"].use(U["a"]);var pi=new U["a"]({mode:"history",routes:[{path:"*",component:Lt},{path:"/",name:"home",component:wt},{path:"/login",name:"login",component:Ot},{path:"/post/:id",name:"post",component:zt},{path:"/all_posts",name:"all_posts",component:Vt},{path:"/history/:id",name:"history_post",component:Xt},{path:"/all_posts",name:"historic_posts",component:ee},{path:"/dashboard",component:oe,children:[{path:"/",component:me},{path:"posts",component:ve,children:[{path:"add_posts",component:we},{path:"list_posts",component:Oe}]},{path:"history",component:Le,children:[{path:"add_history",component:Ge},{path:"list_history",component:Je}]},{path:"partners",component:ss,children:[{path:"add_partners",component:cs},{path:"list_partners",component:ps}]},{path:"drivers",component:si},{path:"calender",component:ci},{path:"media",component:ks,children:[{path:"/",component:Us},{path:"images",component:Ws},{path:"videos",component:Hs},{path:"logos",component:Ss}]},{path:"settings",component:hi}],meta:{requiresAuth:!0}}]});pi.beforeEach((function(t,e,s){var i=t.matched.some((function(t){return t.meta.requiresAuth})),a=T.a.auth().currentUser;i&&!a?s("/login"):s()}));var vi=pi,bi=s("2f62"),Ci=s("1543"),_i={namespaced:!0,state:{currentUser:null,userProfile:{}},mutations:{setCurrentUser:function(t,e){t.currentUser=e},setUserProfile:function(t,e){t.userProfile=e}},actions:{fetchUser:function(t){var e=t.commit,s=t.state;Ci.usersCollection.doc(s.currentUser.uid).get().then((function(t){e("setUserProfile",t.data())})).catch((function(t){console.log(t)}))},clearData:function(t){var e=t.commit;e("setCurrentUser",null),e("setUserProfile",null)},updateProfile:function(t,e){var s=t.state,i=e.name,a=e.title;Ci.usersCollection.doc(s.currentUser.uid).update({name:i,title:a}).catch((function(t){console.log(t)}))}},getters:{currentUser:function(t){return t.currentUser},getUserProfile:function(t){return t.userProfile}}},ki=_i,yi=s("1543"),xi={namespaced:!0,state:{allPosts:[],post:null},mutations:{setPosts:function(t,e){t.allPosts=e||[]},setPost:function(t,e){t.post=e||null},clearPost:function(t){t.post=null}},actions:{setPost:function(t,e){var s=t.commit;yi.postsCollection.doc(e).get().then((function(t){var e=t.data();s("setPost",e)}))},setPosts:function(t){var e=t.commit;yi.postsCollection.orderBy("date","desc").onSnapshot((function(t){var s=[];t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),e("setPosts",s)}))}},getters:{getPost:function(t){return t.post},getPosts:function(t){return t.allPosts}}},wi=xi,Ii=s("1543"),$i={namespaced:!0,state:{images:[],imageUrl:null,image:null,logos:[],logoUrl:null,logo:null,driverImages:[],driverImageUrl:null,driverImage:null,trackImages:[],trackImageUrl:null,trackImage:null,request:!1,confirmation:!1},actions:{setImages:function(t){var e=t.commit;Ii.imageUrlCollection.orderBy("createdOn","desc").onSnapshot((function(t){var s=[];t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),e("setImages",s)}))},setImage:function(t,e){var s=t.commit;Ii.imageUrlCollection.where("url","==",e).get().then((function(t){t.forEach((function(t){var e=t.data();e.id=t.id,s("setImage",e)}))}))},setLogos:function(t){var e=t.commit;Ii.logosCollection.orderBy("createdOn","desc").onSnapshot((function(t){var s=[];t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),e("setLogos",s)}))},setLogo:function(t,e){var s=t.commit;Ii.logosCollection.where("url","==",e).get().then((function(t){t.forEach((function(t){var e=t.data();e.id=t.id,s("setLogo",e)}))}))},setDriverImages:function(t){var e=t.commit;Ii.driversImagesCollection.orderBy("createdOn","desc").onSnapshot((function(t){var s=[];t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),e("setDriverImages",s)}))},setDriverImage:function(t,e){var s=t.commit;Ii.driversImagesCollection.where("url","==",e).get().then((function(t){t.forEach((function(t){var e=t.data();e.id=t.id,s("setDriverImage",e)}))}))},setTrackImages:function(t){var e=t.commit;Ii.tracksImagesCollection.orderBy("createdOn","desc").onSnapshot((function(t){var s=[];t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),e("setTrackImages",s)}))},setTrackImage:function(t,e){var s=t.commit;Ii.tracksImagesCollection.where("url","==",e).get().then((function(t){t.forEach((function(t){var e=t.data();e.id=t.id,s("setTrackImage",e)}))}))},uploadImage:function(t,e){var s=t.commit;s("setRequest",!0);var i=Ii.storage.ref("images/"+e.name),a=i.put(e);a.on("state_changed",(function(){}),(function(){}),(function(){a.snapshot.ref.getDownloadURL().then((function(t){Ii.imageUrlCollection.add({name:e.name,createdOn:new Date,url:t}).then((function(){s("setImageUrl",t),s("setRequest",!1),s("confirmation",!0),setTimeout((function(){s("confirmation",!1)}),5e3)})).catch((function(t){alert(t.message)}))}))}))},uploadLogo:function(t,e){var s=t.commit;s("setRequest",!0);var i=Ii.storage.ref("logos/"+e.name),a=i.put(e);a.on("state_changed",(function(){}),(function(){}),(function(){a.snapshot.ref.getDownloadURL().then((function(t){Ii.logosCollection.add({name:e.name,createdOn:new Date,url:t}).then((function(){s("setLogoUrl",t),s("setRequest",!1),s("confirmation",!0),setTimeout((function(){s("confirmation",!1)}),5e3)})).catch((function(t){alert(t.message)}))}))}))},uploadDriverImage:function(t,e){var s=t.commit;s("setRequest",!0);var i=Ii.storage.ref("drivers/"+e.name),a=i.put(e);a.on("state_changed",(function(){}),(function(){}),(function(){a.snapshot.ref.getDownloadURL().then((function(t){Ii.driversImagesCollection.add({name:e.name,createdOn:new Date,url:t}).then((function(){s("setDriverUrl",t),s("setRequest",!1),s("confirmation",!0),setTimeout((function(){s("confirmation",!1)}),5e3)})).catch((function(t){alert(t.message)}))}))}))},uploadTrackImage:function(t,e){var s=t.commit;s("setRequest",!0);var i=Ii.storage.ref("tracks/"+e.name),a=i.put(e);a.on("state_changed",(function(){}),(function(){}),(function(){a.snapshot.ref.getDownloadURL().then((function(t){Ii.tracksImagesCollection.add({name:e.name,createdOn:new Date,url:t}).then((function(){s("setTrackUrl",t),s("setRequest",!1),s("confirmation",!0),setTimeout((function(){s("confirmation",!1)}),5e3)})).catch((function(t){alert(t.message)}))}))}))}},mutations:{setImages:function(t,e){t.images=e||[]},setImage:function(t,e){t.image=e||{}},setLogos:function(t,e){t.logos=e||[]},setLogo:function(t,e){t.logo=e||{}},setDriverImages:function(t,e){t.driverImages=e||[]},setDriverImage:function(t,e){t.driverImage=e||{}},setTrackImages:function(t,e){t.trackImages=e||[]},setTrackImage:function(t,e){t.trackImage=e||{}},setImageUrl:function(t,e){t.imageUrl=e||null},setLogoUrl:function(t,e){t.logoUrl=e||null},setDriverUrl:function(t,e){t.driverImageUrl=e||null},setTrackUrl:function(t,e){t.trackImageUrl=e||null},setRequest:function(t,e){t.request=e||!1},confirmation:function(t,e){t.confirmation=e||!1}},getters:{getImages:function(t){return t.images},getImage:function(t){return t.image},getLogos:function(t){return t.logos},getLogo:function(t){return t.logo},getDriverImages:function(t){return t.driverImages},getDriverImage:function(t){return t.driverImage},getTrackImages:function(t){return t.trackImages},getTrackImage:function(t){return t.trackImage},getImageUrl:function(t){return t.imageUrl},getLogoUrl:function(t){return t.logoUrl},getDriverUrl:function(t){return t.driverImageUrl},getTrackUrl:function(t){return t.trackImageUrl},getRequest:function(t){return t.request},confirmation:function(t){return t.confirmation}}},Di=$i,Ui=s("1543"),Pi={namespaced:!0,state:{allPartners:[],partner:null},mutations:{setPartners:function(t,e){t.allPartners=e||[]},setPartner:function(t,e){t.partner=e||null},clearPartner:function(t){t.partner=null}},actions:{setPartner:function(t,e){var s=t.commit;Ui.partnersCollection.doc(e).get().then((function(t){var e=t.data();e.id=t.id,s("setPartner",e)}))},setPartners:function(t){var e=t.commit;Ui.partnersCollection.orderBy("name","desc").onSnapshot((function(t){var s=[];t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),e("setPartners",s)}))}},getters:{getPartner:function(t){return t.partner},getPartners:function(t){return t.allPartners}}},Ti=Pi,ji=s("1543"),Oi={namespaced:!0,state:{allDrivers:[],driver:null},mutations:{setDrivers:function(t,e){t.allDrivers=e||[]},setDriver:function(t,e){t.driver=e||null}},actions:{setDrivers:function(t){var e=t.commit;ji.driversCollection.orderBy("firstName").onSnapshot((function(t){var s=[];t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),e("setDrivers",s)}))},setDriver:function(t,e){var s=t.commit;ji.driversCollection.doc(e).get().then((function(t){var e=t.data();e.id=t.id,s("setDriver",e)}))}},getters:{getDriver:function(t){return t.driver},getDrivers:function(t){return t.allDrivers}}},Ni=Oi,qi=s("1543"),Si={namespaced:!0,state:{allRounds:[],round:null,tracks:[],track:null,trackOptions:[]},mutations:{setAllRounds:function(t,e){t.allRounds=e||[]},setRound:function(t,e){t.round=e||null},setAllTracks:function(t,e){t.tracks=e||[]},setTrack:function(t,e){t.track=e||null},setTrackOptions:function(t,e){t.trackOptions=e||[]}},actions:{setAllRounds:function(t){var e=t.commit;qi.calenderRounds.orderBy("date").onSnapshot((function(t){var s=[],i=new Date;t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e),e.date.toDate()<i?e.ongoing=!1:e.ongoing=!0})),e("setAllRounds",s)}))},setRound:function(t,e){var s=t.commit;qi.calenderRounds.doc(e).get().then((function(t){var e=t.data();e.id=t.id,s("setRound",e)}))},setAllTracks:function(t){var e=t.commit;qi.tracksCollection.orderBy("name").onSnapshot((function(t){var s=[],i=[];t.forEach((function(t){var e=t.data();e.id=t.id;var a={value:t.id,text:e.name};s.push(e),i.push(a)})),e("setAllTracks",s),e("setTrackOptions",i)}))},setTrack:function(t,e){var s=t.commit;qi.tracksCollection.doc(e).get().then((function(t){var e=t.data();e.id=t.id,s("setTrack",e)}))}},getters:{getAllRounds:function(t){return t.allRounds},getRound:function(t){return t.round},getAllTracks:function(t){return t.tracks},getTrack:function(t){return t.track},getTrackOptions:function(t){return t.trackOptions}}},Ei=Si,Li=s("1543"),Ri={namespaced:!0,state:{allHistory:[],history:null},mutations:{setAllHistory:function(t,e){t.allHistory=e||[]},setHistory:function(t,e){t.history=e||null},clearHistory:function(t){t.history=null}},actions:{setHistory:function(t,e){var s=t.commit;Li.historicCollection.doc(e).get().then((function(t){var e=t.data();s("setHistory",e)}))},setAllHistory:function(t){var e=t.commit;Li.historicCollection.orderBy("date","desc").onSnapshot((function(t){var s=[];t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),e("setAllHistory",s)}))}},getters:{getHistory:function(t){return t.history},getAllHistory:function(t){return t.allHistory}}},Mi=Ri,Ai=s("1543"),Fi={namespaced:!0,state:{galleryContent:[]},mutations:{setGallery:function(t,e){t.galleryContent=e||[]}},actions:{setGallery:function(t){var e=t.commit;Ai.galleryCollection.orderBy("createdOn","desc").onSnapshot((function(t){var s=[];t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),e("setGallery",s)}))}},getters:{getGallery:function(t){return t.galleryContent}}},Hi=Fi,zi=s("1543"),Gi={namespaced:!0,state:{allVideos:[],video:null,videoUrl:null,request:null,confirmation:null},mutations:{setAllVideos:function(t,e){t.allVideos=e||[]},setVideo:function(t,e){t.video=e||[]},setVideoUrl:function(t,e){t.videoUrl=e||null},setRequest:function(t,e){t.request=e||!1},confirmation:function(t,e){t.confirmation=e||!1}},actions:{setAllVideos:function(t){var e=t.commit;zi.videosCollection.orderBy("createdOn","desc").onSnapshot((function(t){var s=[];t.forEach((function(t){var e=t.data();e.id=t.id,s.push(e)})),e("setAllVideos",s)}))},setVideo:function(t,e){var s=t.commit;zi.videosCollection.where("url","==",e).get().then((function(t){t.forEach((function(t){var e=t.data();e.id=t.id,s("setVideo",e)}))}))},uploadVideo:function(t,e){var s=t.commit;s("setRequest",!0);var i=zi.storage.ref("videos/"+e.name),a=i.put(e);a.on("state_changed",(function(){}),(function(){}),(function(){a.snapshot.ref.getDownloadURL().then((function(t){zi.videosCollection.add({name:e.name,createdOn:new Date,url:t}).then((function(){s("setVideoUrl",t),s("setRequest",!1),s("confirmation",!0),setTimeout((function(){s("confirmation",!1)}),5e3)})).catch((function(t){alert(t.message)}))}))}))}},getters:{getAllVideos:function(t){return t.allVideos},getVideo:function(t){return t.video},getVideoUrl:function(t){return t.videoUrl},getRequest:function(t){return t.request},confirmation:function(t){return t.confirmation}}},Yi=Gi;i["default"].use(bi["a"]);var Vi,Bi=new bi["a"].Store({modules:{admin:ki,posts:wi,images:Di,partners:Ti,drivers:Ni,calender:Ei,history:Mi,gallery:Hi,videos:Yi}}),Qi=(s("bb35"),s("6672"),s("1dce")),Wi=s.n(Qi),Ki=s("c3b3"),Ji=s.n(Ki),Xi=s("fa33"),Zi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["link"===t.type?s("router-link",{class:["btn","btn-primary"].concat(t.addClass),style:t.ovStyle,attrs:{to:t.linkTo}},[t._t("default")],2):t._e(),"btn"===t.type?s("div",{class:["btn","btn-primary"].concat(t.addClass),style:t.ovStyle,attrs:{to:t.linkTo},on:{click:t.action}},[t._t("default")],2):t._e()],1)},ta=[],ea={props:["linkTo","addClass","ovStyle","type","action"]},sa=ea,ia=Object(p["a"])(sa,Zi,ta,!1,null,null,null),aa=ia.exports,ra=s("1543");i["default"].component("app-button",aa),i["default"].component("datepicker",Xi["a"]),i["default"].use(Wi.a),i["default"].use(Ji.a,{}),ra.auth.onAuthStateChanged((function(t){t&&(Bi.commit("admin/setCurrentUser",t),Bi.dispatch("admin/fetchUser"),ra.usersCollection.doc(t.uid).onSnapshot((function(t){Bi.commit("admin/setUserProfile",t.data())})))})),ra.auth.onAuthStateChanged((function(){Vi||(Vi=new i["default"]({el:"#app",router:vi,store:Bi,render:function(t){return t(D)}}))}))},6141:function(t,e,s){"use strict";var i=s("f080"),a=s.n(i);a.a},"623d":function(t,e,s){"use strict";var i=s("2994"),a=s.n(i);a.a},6672:function(t,e,s){},"7f9e":function(t,e,s){"use strict";var i=s("f616"),a=s.n(i);a.a},"8cbb":function(t,e,s){"use strict";var i=s("4aec"),a=s.n(i);a.a},bb35:function(t,e,s){},c2b5:function(t,e,s){},c342:function(t,e,s){t.exports=s.p+"img/Balfe_logo.0d8fa2cd.png"},cd68:function(t,e,s){"use strict";var i=s("336e"),a=s.n(i);a.a},e1ea:function(t,e,s){},e507:function(t,e,s){"use strict";var i=s("c2b5"),a=s.n(i);a.a},f080:function(t,e,s){},f616:function(t,e,s){}});
//# sourceMappingURL=app.127b8fe2.js.map